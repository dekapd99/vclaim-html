$("#chartdiv").hide();$("#chartDiagnosadiv").hide();$("#diverrorlogPoli").hide();$("#diverrorlogDx").hide();$(document).ready(function(){function t(n,t){$(document).ajaxStart(function(){Pace.restart()});$.ajax({type:"GET",url:$("#txturl").val()+"/Referensi/tahun",success:function(i){var u,r;if(i=JSON.parse(LZString.decompressFromEncodedURIComponent(i)),i.pesan.kode=="1"){for(u="<option value=''>-- Pilih Tahun --<\/option>",r=0;r<i.tahun.length;r++)u+="<option value='"+i.tahun[r].tahun+"'>"+i.tahun[r].tahun+"<\/option>";$("#cbtahun").html(u);n=="1"&&$("#cbtahun").val(t)}else $("#cbtahun").html("")}})}function i(n){var r=new Date(n),t=""+(r.getMonth()+1),i=""+r.getDate(),u=r.getFullYear();return t.length<2&&(t="0"+t),i.length<2&&(i="0"+i),[u,t,i].join("-")}function r(n){var i=new Date(n),r=i.getMonth()+1,u=i.getFullYear();$("#cbbulan").val(r);t("1",u)}function n(){$.ajax({type:"GET",url:$("#txturl").val()+"/Charts/chartKunjungan",success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));$("#lblRiHariIni").html(n.kunjungan.rihariini);$("#lblRjHariIni").html(n.kunjungan.rjhariini);$("#lblRiKemarin").html(n.kunjungan.rikemarin);$("#lblRjKemarin").html(n.kunjungan.rjkemarin)}})}function u(n){$.ajax({type:"GET",url:$("#txturl").val()+"/Charts/chartPoli",data:"tgl="+LZString.compressToEncodedURIComponent(JSON.stringify(n)),success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));e(n.jumlah);n.pesan.kode=="1"?($("#chartdiv").show(),$("#diverrorlogPoli").hide()):($("#errorLogPoli").html("Data Tidak Ada"),$("#diverrorlogPoli").show(),$("#chartdiv").hide())}})}function f(n,t){$.ajax({type:"GET",url:$("#txturl").val()+"/Charts/chartSpesialistik",data:"bulan="+LZString.compressToEncodedURIComponent(JSON.stringify(n))+"&tahun="+LZString.compressToEncodedURIComponent(JSON.stringify(t)),success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));o(n.jumlah);n.pesan.kode=="1"?($("#chartDiagnosadiv").show(),$("#diverrorlogDx").hide()):($("#errorLogDx").html("Data Tidak Ada"),$("#chartDiagnosadiv").hide(),$("#diverrorlogDx").show())}})}function e(n){var t=AmCharts.makeChart("chartdiv",{type:"pie",theme:"light",dataProvider:n,valueField:"jml",titleField:"nama",startEffect:"elastic",startDuration:2,labelRadius:15,innerRadius:"50%",depth3D:10,balloonText:"[[title]]<br><span style='font-size:14px'><b>[[value]]<\/b> ([[percents]]%)<\/span>",angle:15})}function o(n){var t=AmCharts.makeChart("chartDiagnosadiv",{type:"funnel",theme:"light",dataProvider:n,balloon:{fixedPosition:!0},valueField:"jml",titleField:"nama",marginRight:240,marginLeft:50,startX:-500,depth3D:100,angle:40,outlineAlpha:1,outlineColor:"#FFFFFF",outlineThickness:2,labelPosition:"right",balloonText:"[[title]]: [[value]]n[[description]]"})}$("#txturl").val(base_url);$("#lblRiHariIni").html("0");$("#lblRjHariIni").html("0");$("#lblRiKemarin").html("0");$("#lblRjKemarin").html("0");$("#chartdiv").hide();$("#chartDiagnosadiv").hide();r(new Date);$("#diverrorlogPoli").hide();$("#diverrorlogDx").hide();$(".datepicker").val(i(new Date));$(".datepicker").datepicker({language:"id",todayHighlight:1,format:"yyyy-mm-dd",autoclose:!0,orientation:"left bottom"});$("#btnCariPoli").click(function(){u($("#txtTgl").val())});$("#btnCariSpesialistik").click(function(){f($("#cbbulan").val(),$("#cbtahun").val())});$("#btnHariIni").click(function(){n()});$("#btnHariIni2").click(function(){n()});$("#btnHariKemarin2").click(function(){n()})})