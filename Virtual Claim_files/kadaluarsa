$(document).ready(function(){function t(n){var t="";switch(n){case"1":t="Januari";break;case"2":t="Februari";break;case"3":t="Maret";break;case"4":t="April";break;case"5":t="Mei";break;case"6":t="Juni";break;case"7":t="Juli";break;case"8":t="Agustus";break;case"9":t="September";break;case"10":t="Oktober";break;case"11":t="Nopember";break;case"12":t="Desember"}return t}function i(){$.ajax({type:"GET",url:$("#txturl").val()+"/Kadaluarsa/listRekapKadaluarsa",success:function(t){t=JSON.parse(LZString.decompressFromEncodedURIComponent(t));t.pesan.kode=="1"?($("#ModalKadaluarsa").modal("show"),n.clear().draw(),n.rows.add(t.list).draw()):n.clear().draw()}})}i();var n=$("#tblKadaluarsa").DataTable({data:[],select:!0,columnDefs:[{targets:0,searchable:!1,orderable:!1,data:null,title:"No",render:function(n,t,i,r){return r.settings._iDisplayStart+r.row+1}},{targets:3,render:function(n){return"<div class='btn-group'> <button type='button' class='btn btn-donlot btn-xs data-toggle='modal' >"+n+"<\/button> <\/div>"}}],columns:[{data:"nmr",width:"5%"},{data:function(n){return t(n.bulan)},width:"20%"},{data:"tahun",width:"15%"},{data:"jml",width:"15%"}],order:[[0,"asc"]],bAutoWidth:!0,rowCallback:function(){},bFilter:!1,bInfo:!0,bLengthChange:!1,processing:!0,retrieve:!0,pageLength:10,scroll:200,searching:!0});$("#tblKadaluarsa tbody").on("click",".btn-donlot",function(){$(document).ajaxStart(function(){Pace.restart()});var t=n.row($(this).parents("tr")).data();$.ajax({type:"GET",url:$("#txturl").val()+"/Kadaluarsa/listDataKadaluarsa",data:"bulan="+LZString.compressToEncodedURIComponent(JSON.stringify(t.bulan))+"&tahun="+LZString.compressToEncodedURIComponent(JSON.stringify(t.tahun)),success:function(n){var t=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),i;t.pesan.kode=="1"&&(i=alasql("select nosep NOSEP,tglsep TGLSEP,tglplgsep TGLPULANG,jnspelsep RIRJ,nokapst NOKARTU,[noMr] MR,nmpst NAMAPESERTA,                                         keterangan KETERANGAN                                          FROM ?",[t.list]),generateXLSProtect(i,"potensiKlaimKadaluarsa.xlsx"))}})})})