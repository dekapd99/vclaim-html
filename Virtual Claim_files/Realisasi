function formattgl(n){var r=new Date(n),t=""+(r.getMonth()+1),i=""+r.getDate(),u=r.getFullYear();return t.length<2&&(t="0"+t),i.length<2&&(i="0"+i),[u,t,i].join("-")}function convertToRupiah(n){for(var i="",r=n.toString().split("").reverse().join(""),t=0;t<r.length;t++)t%3==0&&(i+=r.substr(t,3)+".");return"Rp. "+i.split("",i.length-1).reverse().join("")}function getPisa(n){return n==="1"?"Peserta":n==="2"?"Suami":n==="3"?"Istri":n==="4"?"Anak":"Klg Tambahan"}function getKelamin(n){return n==="L"?"Laki-Laki":"Perempuan"}function getStatusName(n){var t=null;return n=="0"?t="Baru":n=="1"?t="DiTagihkan":n=="2"&&(t="DiVerifikasi"),t}function getKdtkp(n){var t=null;return n=="30"?t="Rawat Jalan Tingkat Lanjut":n=="40"?t="Rawat Inap Tingkat Lanjut":n=="10"?t="Rawat Jalan Tingkat Pertama":n=="20"?t="Rawat Inap Tingkat Pertama":n=="50"&&(t="Promotif"),t}function setDataProtesaGigi(n){this.peserta=n.peserta;this.userPPK=n.userPPK;this.nmprovider=n.nmprovider;this.userNmPPK=n.userNmPPK;$("#NoRefSEPAsal").val(userPPK);$("#NamaRefSEPAsal").val(nmprovider);$("#NamaLegislator").text(userNmPPK)}function checkLegalisasiGigiHistory(n){txtKosong();panelRahangAtasKanan.find("input:checkbox").prop("disable",!0);panelRahangAtasKiri.find("input:checkbox").prop("disable",!0);panelRahangBawahKanan.find("input:checkbox").prop("disable",!0);panelRahangBawahKiri.find("input:checkbox").prop("disable",!0);biaya_txt2.val(convertToRupiah(0));$(document).ajaxStart(function(){Pace.restart()});$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/checkLegalisasiGigiHistory",data:"noka="+LZString.compressToEncodedURIComponent(JSON.stringify(n)),success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.pesan.kode=="1"){var t=n.TransGigi;let i={};for(let n=1;n<=4;n++){(n=1)&&(i.rahangAtasKanan={});(n=2)&&(i.rahangAtasKiri={});(n=3)&&(i.rahangBawahKanan={});(n=4)&&(i.rahangBawahKiri={});for(let t=1;t<=8;t++)(n=1)&&(i.rahangAtasKanan["gigi"+t]=""),(n=2)&&(i.rahangAtasKiri["gigi"+t]=""),(n=3)&&(i.rahangBawahKanan["gigi"+t]=""),(n=4)&&(i.rahangBawahKiri["gigi"+t]="")}LastTarifRahangAtas=0;LastTarifRahangBawah=0;LastTanggalRahangAtas=null;LastTanggalRahangBawah=null;$.each(t,function(n,t){t.rahangAtasKanan.gigi1=="True"&&(i.rahangAtasKanan.gigi1=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKanan.gigi2=="True"&&(i.rahangAtasKanan.gigi2=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKanan.gigi3=="True"&&(i.rahangAtasKanan.gigi3=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKanan.gigi4=="True"&&(i.rahangAtasKanan.gigi4=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKanan.gigi5=="True"&&(i.rahangAtasKanan.gigi5=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKanan.gigi6=="True"&&(i.rahangAtasKanan.gigi6=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKanan.gigi7=="True"&&(i.rahangAtasKanan.gigi7=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKanan.gigi8=="True"&&(i.rahangAtasKanan.gigi8=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKiri.gigi1=="True"&&(i.rahangAtasKiri.gigi1=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKiri.gigi2=="True"&&(i.rahangAtasKiri.gigi2=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKiri.gigi3=="True"&&(i.rahangAtasKiri.gigi3=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKiri.gigi4=="True"&&(i.rahangAtasKiri.gigi4=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKiri.gigi5=="True"&&(i.rahangAtasKiri.gigi5=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKiri.gigi6=="True"&&(i.rahangAtasKiri.gigi6=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKiri.gigi7=="True"&&(i.rahangAtasKiri.gigi7=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangAtasKiri.gigi8=="True"&&(i.rahangAtasKiri.gigi8=!0,LastTarifRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangAtas+1:LastTarifRahangAtas+0,LastTanggalRahangAtas=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangAtas);t.rahangBawahKanan.gigi1=="True"&&(i.rahangBawahKanan.gigi1=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKanan.gigi2=="True"&&(i.rahangBawahKanan.gigi2=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKanan.gigi3=="True"&&(i.rahangBawahKanan.gigi3=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKanan.gigi4=="True"&&(i.rahangBawahKanan.gigi4=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKanan.gigi5=="True"&&(i.rahangBawahKanan.gigi5=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKanan.gigi6=="True"&&(i.rahangBawahKanan.gigi6=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKanan.gigi7=="True"&&(i.rahangBawahKanan.gigi7=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKanan.gigi8=="True"&&(i.rahangBawahKanan.gigi8=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKiri.gigi1=="True"&&(i.rahangBawahKiri.gigi1=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKiri.gigi2=="True"&&(i.rahangBawahKiri.gigi2=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKiri.gigi3=="True"&&(i.rahangBawahKiri.gigi3=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKiri.gigi4=="True"&&(i.rahangBawahKiri.gigi4=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKiri.gigi5=="True"&&(i.rahangBawahKiri.gigi5=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKiri.gigi6=="True"&&(i.rahangBawahKiri.gigi6=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKiri.gigi7=="True"&&(i.rahangBawahKiri.gigi7=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah);t.rahangBawahKiri.gigi8=="True"&&(i.rahangBawahKiri.gigi8=!0,LastTarifRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?LastTarifRahangBawah+1:LastTarifRahangBawah+0,LastTanggalRahangBawah=t.transAlkes.kdJenisAlkes.tarif>0?t.transAlkes.TglLegalisasi:LastTanggalRahangBawah)});let e=new Date(LastTanggalRahangAtas);e.setFullYear(e.getFullYear()+2);let o=new Date(LastTanggalRahangBawah);o.setFullYear(o.getFullYear()+2);let r={day:"numeric",month:"long",year:"numeric"},s=new Date(LastTanggalRahangAtas);s.setFullYear(s.getFullYear());let h=new Date(LastTanggalRahangBawah);h.setFullYear(h.getFullYear());let c=s.toLocaleDateString("id-ID",r),l=h.toLocaleDateString("id-ID",r),a=e.toLocaleDateString("id-ID",r),v=o.toLocaleDateString("id-ID",r),y="Rahang Atas sudah pernah ditagihkan pada tanggal "+c+" sehingga rahang yang dapat di tagihkan kembali dapat dientrikan kembali pada tanggal "+a,p="Rahang Bawah sudah pernah ditagihkan pada tanggal "+l+" sehingga rahang yang dapat di tagihkan kembali dapat dientrikan kembali pada tanggal "+v;$("input:checkbox").prop("checked",!1).prop("disabled",!0);i.rahangAtasKanan.gigi1==!0?$("#cb_rahangatas_ka_1").prop("checked",!0):$("#cb_rahangatas_ka_1").prop("disabled",!1);i.rahangAtasKanan.gigi2==!0?$("#cb_rahangatas_ka_2").prop("checked",!0):$("#cb_rahangatas_ka_2").prop("disabled",!1);i.rahangAtasKanan.gigi3==!0?$("#cb_rahangatas_ka_3").prop("checked",!0):$("#cb_rahangatas_ka_3").prop("disabled",!1);i.rahangAtasKanan.gigi4==!0?$("#cb_rahangatas_ka_4").prop("checked",!0):$("#cb_rahangatas_ka_4").prop("disabled",!1);i.rahangAtasKanan.gigi5==!0?$("#cb_rahangatas_ka_5").prop("checked",!0):$("#cb_rahangatas_ka_5").prop("disabled",!1);i.rahangAtasKanan.gigi6==!0?$("#cb_rahangatas_ka_6").prop("checked",!0):$("#cb_rahangatas_ka_6").prop("disabled",!1);i.rahangAtasKanan.gigi7==!0?$("#cb_rahangatas_ka_7").prop("checked",!0):$("#cb_rahangatas_ka_7").prop("disabled",!1);i.rahangAtasKanan.gigi8==!0?$("#cb_rahangatas_ka_8").prop("checked",!0):$("#cb_rahangatas_ka_8").prop("disabled",!1);i.rahangAtasKiri.gigi1==!0?$("#cb_rahangatas_ki_1").prop("checked",!0):$("#cb_rahangatas_ki_1").prop("disabled",!1);i.rahangAtasKiri.gigi2==!0?$("#cb_rahangatas_ki_2").prop("checked",!0):$("#cb_rahangatas_ki_2").prop("disabled",!1);i.rahangAtasKiri.gigi3==!0?$("#cb_rahangatas_ki_3").prop("checked",!0):$("#cb_rahangatas_ki_3").prop("disabled",!1);i.rahangAtasKiri.gigi4==!0?$("#cb_rahangatas_ki_4").prop("checked",!0):$("#cb_rahangatas_ki_4").prop("disabled",!1);i.rahangAtasKiri.gigi5==!0?$("#cb_rahangatas_ki_5").prop("checked",!0):$("#cb_rahangatas_ki_5").prop("disabled",!1);i.rahangAtasKiri.gigi6==!0?$("#cb_rahangatas_ki_6").prop("checked",!0):$("#cb_rahangatas_ki_6").prop("disabled",!1);i.rahangAtasKiri.gigi7==!0?$("#cb_rahangatas_ki_7").prop("checked",!0):$("#cb_rahangatas_ki_7").prop("disabled",!1);i.rahangAtasKiri.gigi8==!0?$("#cb_rahangatas_ki_8").prop("checked",!0):$("#cb_rahangatas_ki_8").prop("disabled",!1);i.rahangBawahKanan.gigi1==!0?$("#cb_rahangbawah_ka_1").prop("checked",!0):$("#cb_rahangbawah_ka_1").prop("disabled",!1);i.rahangBawahKanan.gigi2==!0?$("#cb_rahangbawah_ka_2").prop("checked",!0):$("#cb_rahangbawah_ka_2").prop("disabled",!1);i.rahangBawahKanan.gigi3==!0?$("#cb_rahangbawah_ka_3").prop("checked",!0):$("#cb_rahangbawah_ka_3").prop("disabled",!1);i.rahangBawahKanan.gigi4==!0?$("#cb_rahangbawah_ka_4").prop("checked",!0):$("#cb_rahangbawah_ka_4").prop("disabled",!1);i.rahangBawahKanan.gigi5==!0?$("#cb_rahangbawah_ka_5").prop("checked",!0):$("#cb_rahangbawah_ka_5").prop("disabled",!1);i.rahangBawahKanan.gigi6==!0?$("#cb_rahangbawah_ka_6").prop("checked",!0):$("#cb_rahangbawah_ka_6").prop("disabled",!1);i.rahangBawahKanan.gigi7==!0?$("#cb_rahangbawah_ka_7").prop("checked",!0):$("#cb_rahangbawah_ka_7").prop("disabled",!1);i.rahangBawahKanan.gigi8==!0?$("#cb_rahangbawah_ka_8").prop("checked",!0):$("#cb_rahangbawah_ka_8").prop("disabled",!1);i.rahangBawahKiri.gigi1==!0?$("#cb_rahangbawah_ki_1").prop("checked",!0):$("#cb_rahangbawah_ki_1").prop("disabled",!1);i.rahangBawahKiri.gigi2==!0?$("#cb_rahangbawah_ki_2").prop("checked",!0):$("#cb_rahangbawah_ki_2").prop("disabled",!1);i.rahangBawahKiri.gigi3==!0?$("#cb_rahangbawah_ki_3").prop("checked",!0):$("#cb_rahangbawah_ki_3").prop("disabled",!1);i.rahangBawahKiri.gigi4==!0?$("#cb_rahangbawah_ki_4").prop("checked",!0):$("#cb_rahangbawah_ki_4").prop("disabled",!1);i.rahangBawahKiri.gigi5==!0?$("#cb_rahangbawah_ki_5").prop("checked",!0):$("#cb_rahangbawah_ki_5").prop("disabled",!1);i.rahangBawahKiri.gigi6==!0?$("#cb_rahangbawah_ki_6").prop("checked",!0):$("#cb_rahangbawah_ki_6").prop("disabled",!1);i.rahangBawahKiri.gigi7==!0?$("#cb_rahangbawah_ki_7").prop("checked",!0):$("#cb_rahangbawah_ki_7").prop("disabled",!1);i.rahangBawahKiri.gigi8==!0?$("#cb_rahangbawah_ki_8").prop("checked",!0):$("#cb_rahangbawah_ki_8").prop("disabled",!1);let w=$("#panelRahangAtasKanan input:checkbox:checked:disabled").length,b=$("#panelRahangAtasKiri input:checkbox:checked:disabled").length,k=$("#panelRahangBawahKanan input:checkbox:checked:disabled").length,d=$("#panelRahangBawahKiri input:checkbox:checked:disabled").length,u=w+b,f=k+d;LastTanggalRahangAtas!==null&&u>0?$("#lblAlertRahangAtas").text(y):$("#lblAlertRahangAtas").text("");LastTanggalRahangBawah!==null&&f>0?$("#lblAlertRahangBawah").text(p):$("#lblAlertRahangBawah").text("");u>0?(chk_rahang_atas.prop("checked",!0),$('#panelRahangAtasKanan input[type="checkbox"]').prop("disabled",!0),$('#panelRahangAtasKiri input[type="checkbox"]').prop("disabled",!0)):chk_rahang_atas.prop("checked",!1).prop("disabled",!1);f>0?(chk_rahang_bawah.prop("checked",!0),$('#panelRahangBawahKanan input[type="checkbox"]').prop("disabled",!0),$('#panelRahangBawahKiri input[type="checkbox"]').prop("disabled",!0)):chk_rahang_bawah.prop("checked",!1).prop("disabled",!1);u+f==0?chk_full_denture.prop("disabled",!1):u+f==32&&chk_full_denture.prop("checked",!0)}else $("input[type=checkbox][disabled]").prop("disabled",!1),$('#panelRahangAtasKanan input[type="checkbox"]').prop("disabled",!0),$('#panelRahangAtasKiri input[type="checkbox"]').prop("disabled",!0),$('#panelRahangBawahKanan input[type="checkbox"]').prop("disabled",!0),$('#panelRahangBawahKiri input[type="checkbox"]').prop("disabled",!0)}})}function loadDataProtesagigi(n){$(document).ajaxStart(function(){Pace.restart()});var t=n;txtKosong();$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/TindakanLegalisasiGigiGet",data:"noReff="+LZString.compressToEncodedURIComponent(JSON.stringify(t.NoReff)),success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.pesan.kode=="1"){$("#ModalAlkesLegalisasi").modal("show");$("#divbiaya_txt").hide();ModalAlkesTitle.text("Pelayanan Protesa Gigi");AlkesHeaderTitle.text("Pelayanan Protesa Gigi");let r;if(r=n.TransGigi,txtKeterangan.val(r.transAlkes.keterangan),NoRefSEP.val(r.transAlkes.noRefAsalSJP),$("#NoRefSEPAsal").val(r.transAlkes.ppkLegal.kdPPK),$("#NamaRefSEPAsal").val(r.transAlkes.ppkLegal.nmPPK),$("#NamaLegislator").text(r.transAlkes.legalisator.NoPeg),txttanggalSEP.val(r.transAlkes.tglResep),r.transAlkes.kdTKP==="10"?$("#cbPelayananFKTP").prop("checked",!0):$("#cbPelayananFKTL").prop("checked",!0),checkLegalisasiRealisasi.val()=="Realisasi"){divTanggalLegalisasi.show();var t=new Date(r.transAlkes.TglLegalisasi),i=t.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});lblTanggalLegalisasi.text(i)}else divTanggalLegalisasi.hide();$("input:checkbox").prop("disabled",!0);$('input[name="rdpilihPelayanan"]').prop("disabled",!0);txtKeterangan.prop("disabled",!0);NoRefSEP.prop("disabled",!0);$("#NoRefSEPAsal").prop("disabled",!0);$("#NamaRefSEPAsal").prop("disabled",!0);txttanggalSEP.prop("disabled",!0);r.rahangAtasKanan.gigi1=="True"?$("#cb_rahangatas_ka_1").prop("checked",!0):$("#cb_rahangatas_ka_1 input:not(:disabled)").prop("checked",!1);r.rahangAtasKanan.gigi2=="True"?$("#cb_rahangatas_ka_2").prop("checked",!0):$("#cb_rahangatas_ka_2 input:not(:disabled)").prop("checked",!1);r.rahangAtasKanan.gigi3=="True"?$("#cb_rahangatas_ka_3").prop("checked",!0):$("#cb_rahangatas_ka_3 input:not(:disabled)").prop("checked",!1);r.rahangAtasKanan.gigi4=="True"?$("#cb_rahangatas_ka_4").prop("checked",!0):$("#cb_rahangatas_ka_4 input:not(:disabled)").prop("checked",!1);r.rahangAtasKanan.gigi5=="True"?$("#cb_rahangatas_ka_5").prop("checked",!0):$("#cb_rahangatas_ka_5 input:not(:disabled)").prop("checked",!1);r.rahangAtasKanan.gigi6=="True"?$("#cb_rahangatas_ka_6").prop("checked",!0):$("#cb_rahangatas_ka_6 input:not(:disabled)").prop("checked",!1);r.rahangAtasKanan.gigi7=="True"?$("#cb_rahangatas_ka_7").prop("checked",!0):$("#cb_rahangatas_ka_7 input:not(:disabled)").prop("checked",!1);r.rahangAtasKanan.gigi8=="True"?$("#cb_rahangatas_ka_8").prop("checked",!0):$("#cb_rahangatas_ka_8 input:not(:disabled)").prop("checked",!1);r.rahangAtasKiri.gigi1=="True"?$("#cb_rahangatas_ki_1").prop("checked",!0):$("#cb_rahangatas_ki_1 input:not(:disabled)").prop("checked",!1);r.rahangAtasKiri.gigi2=="True"?$("#cb_rahangatas_ki_2").prop("checked",!0):$("#cb_rahangatas_ki_2 input:not(:disabled)").prop("checked",!1);r.rahangAtasKiri.gigi3=="True"?$("#cb_rahangatas_ki_3").prop("checked",!0):$("#cb_rahangatas_ki_3 input:not(:disabled)").prop("checked",!1);r.rahangAtasKiri.gigi4=="True"?$("#cb_rahangatas_ki_4").prop("checked",!0):$("#cb_rahangatas_ki_4 input:not(:disabled)").prop("checked",!1);r.rahangAtasKiri.gigi5=="True"?$("#cb_rahangatas_ki_5").prop("checked",!0):$("#cb_rahangatas_ki_5 input:not(:disabled)").prop("checked",!1);r.rahangAtasKiri.gigi6=="True"?$("#cb_rahangatas_ki_6").prop("checked",!0):$("#cb_rahangatas_ki_6 input:not(:disabled)").prop("checked",!1);r.rahangAtasKiri.gigi7=="True"?$("#cb_rahangatas_ki_7").prop("checked",!0):$("#cb_rahangatas_ki_7 input:not(:disabled)").prop("checked",!1);r.rahangAtasKiri.gigi8=="True"?$("#cb_rahangatas_ki_8").prop("checked",!0):$("#cb_rahangatas_ki_8 input:not(:disabled)").prop("checked",!1);r.rahangBawahKanan.gigi1=="True"?$("#cb_rahangbawah_ka_1").prop("checked",!0):$("#cb_rahangbawah_ka_1 input:not(:disabled)").prop("checked",!1);r.rahangBawahKanan.gigi2=="True"?$("#cb_rahangbawah_ka_2").prop("checked",!0):$("#cb_rahangbawah_ka_2 input:not(:disabled)").prop("checked",!1);r.rahangBawahKanan.gigi3=="True"?$("#cb_rahangbawah_ka_3").prop("checked",!0):$("#cb_rahangbawah_ka_3 input:not(:disabled)").prop("checked",!1);r.rahangBawahKanan.gigi4=="True"?$("#cb_rahangbawah_ka_4").prop("checked",!0):$("#cb_rahangbawah_ka_4 input:not(:disabled)").prop("checked",!1);r.rahangBawahKanan.gigi5=="True"?$("#cb_rahangbawah_ka_5").prop("checked",!0):$("#cb_rahangbawah_ka_5 input:not(:disabled)").prop("checked",!1);r.rahangBawahKanan.gigi6=="True"?$("#cb_rahangbawah_ka_6").prop("checked",!0):$("#cb_rahangbawah_ka_6 input:not(:disabled)").prop("checked",!1);r.rahangBawahKanan.gigi7=="True"?$("#cb_rahangbawah_ka_7").prop("checked",!0):$("#cb_rahangbawah_ka_7 input:not(:disabled)").prop("checked",!1);r.rahangBawahKanan.gigi8=="True"?$("#cb_rahangbawah_ka_8").prop("checked",!0):$("#cb_rahangbawah_ka_8 input:not(:disabled)").prop("checked",!1);r.rahangBawahKiri.gigi1=="True"?$("#cb_rahangbawah_ki_1").prop("checked",!0):$("#cb_rahangbawah_ki_1 input:not(:disabled)").prop("checked",!1);r.rahangBawahKiri.gigi2=="True"?$("#cb_rahangbawah_ki_2").prop("checked",!0):$("#cb_rahangbawah_ki_2 input:not(:disabled)").prop("checked",!1);r.rahangBawahKiri.gigi3=="True"?$("#cb_rahangbawah_ki_3").prop("checked",!0):$("#cb_rahangbawah_ki_3 input:not(:disabled)").prop("checked",!1);r.rahangBawahKiri.gigi4=="True"?$("#cb_rahangbawah_ki_4").prop("checked",!0):$("#cb_rahangbawah_ki_4 input:not(:disabled)").prop("checked",!1);r.rahangBawahKiri.gigi5=="True"?$("#cb_rahangbawah_ki_5").prop("checked",!0):$("#cb_rahangbawah_ki_5 input:not(:disabled)").prop("checked",!1);r.rahangBawahKiri.gigi6=="True"?$("#cb_rahangbawah_ki_6").prop("checked",!0):$("#cb_rahangbawah_ki_6 input:not(:disabled)").prop("checked",!1);r.rahangBawahKiri.gigi7=="True"?$("#cb_rahangbawah_ki_7").prop("checked",!0):$("#cb_rahangbawah_ki_7 input:not(:disabled)").prop("checked",!1);r.rahangBawahKiri.gigi8=="True"?$("#cb_rahangbawah_ki_8").prop("checked",!0):$("#cb_rahangbawah_ki_8 input:not(:disabled)").prop("checked",!1);let e=$("#panelRahangAtasKanan input:checkbox:checked").length,o=$("#panelRahangAtasKiri input:checkbox:checked").length,s=$("#panelRahangBawahKanan input:checkbox:checked").length,h=$("#panelRahangBawahKiri input:checkbox:checked").length,u=e+o,f=s+h;u>0&&chk_rahang_atas.prop("checked",!0);f>0&&chk_rahang_bawah.prop("checked",!0);u+f==32&&chk_full_denture.prop("checked",!0);$("#simpanPelayanananProtesaGigi_btn").hide();$("#hapus_btn").show()}else notif("Informasi..!!",n.pesan.pesan,"error"),$("input:checkbox").prop("disabled",!1),$('input[name="rdpilihPelayanan"]').prop("disabled",!1),txtKeterangan.prop("disabled",!1),NoRefSEP.prop("disabled",!1),$("#NoRefSEPAsal").prop("disabled",!1),$("#NamaRefSEPAsal").prop("disabled",!1),txttanggalSEP.prop("disabled",!1)},error:function(n){errorHandler(n.responseJSON)}})}function saveDataProtesaGigi(){let u=$("#panelRahangAtasKanan input:checkbox:checked:disabled").length,f=$("#panelRahangAtasKiri input:checkbox:checked:disabled").length,e=$("#panelRahangBawahKanan input:checkbox:checked:disabled").length,o=$("#panelRahangBawahKiri input:checkbox:checked:disabled").length,s=$("#panelRahangAtasKanan input:checkbox:checked:not(:disabled)").length,h=$("#panelRahangAtasKiri input:checkbox:checked:not(:disabled)").length,c=$("#panelRahangBawahKanan input:checkbox:checked:not(:disabled)").length,l=$("#panelRahangBawahKiri input:checkbox:checked:not(:disabled)").length,n=u+f,t=e+o,i=s+h,r=c+l;if(t>0&&r>0?notif("Telah dilakukan Protesa Gigi untuk rahang gigi yang sama pada rentang 2 tahun terakhir","warning"):n>0&&i>0&&notif("Telah dilakukan Protesa Gigi untuk rahang gigi yang sama pada rentang 2 tahun terakhir","warning"),n>0&&t>0)return notif("Legalisasi Sebelumnya sudah melewati batas Plafon","warning"),!1;if(i+r==0)return notif("Belum memilih rahang yang akan di Legalisasi","warning"),!1;let a=txttanggal.val(),v=biaya_txt.val(),y=txttanggal.val(),p=txttanggalSEP.val(),w=NoRefSEP.val(),b=txtnokartu.val(),k=NoRefSEP.val(),d=txttanggal.val(),g=txtKeterangan.val(),nt=cb_rahangatas_ka_1.is(":checked:not(:disabled)"),tt=cb_rahangatas_ka_2.is(":checked:not(:disabled)"),it=cb_rahangatas_ka_3.is(":checked:not(:disabled)"),rt=cb_rahangatas_ka_4.is(":checked:not(:disabled)"),ut=cb_rahangatas_ka_5.is(":checked:not(:disabled)"),ft=cb_rahangatas_ka_6.is(":checked:not(:disabled)"),et=cb_rahangatas_ka_7.is(":checked:not(:disabled)"),ot=cb_rahangatas_ka_8.is(":checked:not(:disabled)"),st=cb_rahangatas_ki_1.is(":checked:not(:disabled)"),ht=cb_rahangatas_ki_2.is(":checked:not(:disabled)"),ct=cb_rahangatas_ki_3.is(":checked:not(:disabled)"),lt=cb_rahangatas_ki_4.is(":checked:not(:disabled)"),at=cb_rahangatas_ki_5.is(":checked:not(:disabled)"),vt=cb_rahangatas_ki_6.is(":checked:not(:disabled)"),yt=cb_rahangatas_ki_7.is(":checked:not(:disabled)"),pt=cb_rahangatas_ki_8.is(":checked:not(:disabled)"),wt=cb_rahangbawah_ka_1.is(":checked:not(:disabled)"),bt=cb_rahangbawah_ka_2.is(":checked:not(:disabled)"),kt=cb_rahangbawah_ka_3.is(":checked:not(:disabled)"),dt=cb_rahangbawah_ka_4.is(":checked:not(:disabled)"),gt=cb_rahangbawah_ka_5.is(":checked:not(:disabled)"),ni=cb_rahangbawah_ka_6.is(":checked:not(:disabled)"),ti=cb_rahangbawah_ka_7.is(":checked:not(:disabled)"),ii=cb_rahangbawah_ka_8.is(":checked:not(:disabled)"),ri=cb_rahangbawah_ki_1.is(":checked:not(:disabled)"),ui=cb_rahangbawah_ki_2.is(":checked:not(:disabled)"),fi=cb_rahangbawah_ki_3.is(":checked:not(:disabled)"),ei=cb_rahangbawah_ki_4.is(":checked:not(:disabled)"),oi=cb_rahangbawah_ki_5.is(":checked:not(:disabled)"),si=cb_rahangbawah_ki_6.is(":checked:not(:disabled)"),hi=cb_rahangbawah_ki_7.is(":checked:not(:disabled)"),ci=cb_rahangbawah_ki_8.is(":checked:not(:disabled)");var li={tglTindakan:a,biaya:v,tglLegal:y,tglSEP:p,refAsalSjp:w,nokaPst:b,kDTKP:"30",refAsalSJP:k,tglLegalisasi:d,keterangan:g,rahangAtasKananGigi1:nt,rahangAtasKananGigi2:tt,rahangAtasKananGigi3:it,rahangAtasKananGigi4:rt,rahangAtasKananGigi5:ut,rahangAtasKananGigi6:ft,rahangAtasKananGigi7:et,rahangAtasKananGigi8:ot,rahangAtasKiriGigi1:st,rahangAtasKiriGigi2:ht,rahangAtasKiriGigi3:ct,rahangAtasKiriGigi4:lt,rahangAtasKiriGigi5:at,rahangAtasKiriGigi6:vt,rahangAtasKiriGigi7:yt,rahangAtasKiriGigi8:pt,rahangBawahKananGigi1:wt,rahangBawahKananGigi2:bt,rahangBawahKananGigi3:kt,rahangBawahKananGigi4:dt,rahangBawahKananGigi5:gt,rahangBawahKananGigi6:ni,rahangBawahKananGigi7:ti,rahangBawahKananGigi8:ii,rahangBawahKiriGigi1:ri,rahangBawahKiriGigi2:ui,rahangBawahKiriGigi3:fi,rahangBawahKiriGigi4:ei,rahangBawahKiriGigi5:oi,rahangBawahKiriGigi6:si,rahangBawahKiriGigi7:hi,rahangBawahKiriGigi8:ci};$.ajax({url:$("#txturl").val()+"/Lupis/saveLegalisasiGigi",data:JSON.stringify({mixed:LZString.compressToEncodedURIComponent(JSON.stringify(li))}),contentType:"application/json",type:"POST",success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.kode=="1")txtKosong(),loadDataRiwayatLegalisasi(txtnokartu.val()),notif("Informasi","Data Berhasil di Simpan","info"),$("#ModalAlkesLegalisasi").modal("hide");else return notif(n.pesan,"error"),!1},error:function(n){ShareMethoerrorHandler(n.responseJSON)}})}function isFullDenture(){let n=$("#panelRahangAtasKanan input:checkbox:checked:not(:disabled)").length==8?!0:!1,t=$("#panelRahangAtasKiri input:checkbox:checked:not(:disabled)").length==8?!0:!1,i=$("#panelRahangBawahKanan input:checkbox:checked:not(:disabled)").length==8?!0:!1,r=$("#panelRahangBawahKiri input:checkbox:checked:not(:disabled)").length==8?!0:!1;n&&t&&i&&r?(alert("Full Denture, semua elemen gigi"),chk_full_denture.prop("checked",!0).trigger("change")):chk_full_denture.prop("checked",!1);refreshBiayaProtesa()}function triggerCheckAll(n,t){switch(n){case 99:protesaGigi_form.find("input:checkbox").prop("checked",t);refreshBiayaProtesa();break;case 1:chk_rahang_atas.prop("checked",t);$('#panelRahangAtasKanan input[type="checkbox"]').prop("disabled",!t);$('#panelRahangAtasKiri input[type="checkbox"]').prop("disabled",!t);refreshBiayaProtesa();break;case 2:chk_rahang_bawah.prop("checked",t);$('#panelRahangBawahKanan input[type="checkbox"]').prop("disabled",!t);$('#panelRahangBawahKiri input[type="checkbox"]').prop("disabled",!t);refreshBiayaProtesa();break;case 0:triggerCheckAll(99,!1)}}function refreshBiayaProtesa(){let c=statusRealisasi.tarifpmk52,l=statusRealisasi.realisasi,n=c-l,t=0,i=$("#panelRahangAtasKanan input:checkbox:checked").length,r=$("#panelRahangAtasKiri input:checkbox:checked").length,u=$("#panelRahangBawahKanan input:checkbox:checked").length,f=$("#panelRahangBawahKiri input:checkbox:checked").length,y=$("#panelRahangAtasKanan input:checkbox:checked:disabled").length,p=$("#panelRahangAtasKiri input:checkbox:checked:disabled").length,w=$("#panelRahangBawahKanan input:checkbox:checked:disabled").length,b=$("#panelRahangBawahKiri input:checkbox:checked:disabled").length,a=i+r,v=u+f,e=y+p,o=w+b,s=0,h=0;var k=txttanggal.val(),d=new Date("2023-01-24");k<d?(s=e>0?e<8?25e4:0:i+r==0?0:i+r>8?5e5:25e4,h=o>0?o<8?25e4:0:u+f==0?0:u+f>8?5e5:25e4):(s=e>0?LastTarifRahangAtas==0?55e4:0:a==0?0:a>0?55e4:0,h=o>0?LastTarifRahangBawah==0?55e4:0:v==0?0:v>0?55e4:0);t=s+h;n=c-(l+t);n=n<0?0:n;biaya_txt2.val(convertToRupiah(t));biaya_txt.val(t)}function cekStatusRealisasiProtesaGigi(n){var t="###",i={noka:this.kunj.peserta.noKartu,tglLegal:n.tglEstRujuk,noKunjungan:n.NoKunjungan};return $.ajax({url:Config.BASE_URL+"/EntriKunjunganDokkel/protesaGigi_getStatusRealisasi",data:JSON.stringify(i),contentType:"application/json",type:"POST",async:!1,success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));n.metaData.code==200?t=n.response:ShareMethod.showMessage(n.metaData.code,n.metaData.message)},error:function(n){ShareMethod.errorHandler(n.responseJSON)}}),t}function convertToRupiah(n){for(var i="",r=n.toString().split("").reverse().join(""),t=0;t<r.length;t++)t%3==0&&(i+=r.substr(t,3)+".");return"Rp. "+i.split("",i.length-1).reverse().join("")}function txtKosong(){statusRealisasi={plafon:0,realisasi:0,tarifpmk52:0};txtKeterangan.val("");NoRefSEP.val("");$("#simpanPelayanananProtesaGigi_btn").show();hapus_btn.hide();txtKeterangan.prop("disabled",!1);NoRefSEP.prop("disabled",!1);NoRefSEPAsal.prop("disabled",!1);NamaRefSEPAsal.prop("disabled",!1);txttanggalSEP.prop("disabled",!1);$("input:checkbox").prop("checked",!1).prop("disabled",!1)}function convertToRupiah(n){for(var i="",r=n.toString().split("").reverse().join(""),t=0;t<r.length;t++)t%3==0&&(i+=r.substr(t,3)+".");return"Rp. "+i.split("",i.length-1).reverse().join("")}function getStatusName(n){var t=null;return n=="0"?t="Baru":n=="1"?t="DiTagihkan":n=="2"&&(t="DiVerifikasi"),t}function convertToRupiah(n){for(var i="",r=n.toString().split("").reverse().join(""),t=0;t<r.length;t++)t%3==0&&(i+=r.substr(t,3)+".");return"Rp. "+i.split("",i.length-1).reverse().join("")}function convertToRupiah(n){for(var i="",r=n.toString().split("").reverse().join(""),t=0;t<r.length;t++)t%3==0&&(i+=r.substr(t,3)+".");return"Rp. "+i.split("",i.length-1).reverse().join("")}var btnQueryPesertaLain=$("#btnQueryPesertaLain"),NoReffLegalisasi,KdJenisAlkesLegalisasi,tglLegalisasiFlag;$(document).ready(function(){function n(){PelayananAlkesForm.val("");JumlahLegalisasi.val("");txtKeterangan.val("");NoRefSEP.val("");txttanggalSEP.val(txttanggalTransaksi.val());$("#cbPelayananFKTL").prop("checked",!1);$("#cbPelayananFKTP").prop("checked",!1);$("input:checkbox").prop("checked",!1).prop("disabled",!1);cbPpkAsal.prop("checked",!1);cbPpkTujuan.prop("checked",!1);NoPpkTujuan.val("");NamaPpkTujuan.val("");SpherisKa.val("");UkuranSpherisKa1.val("");UkuranSpherisKa2.val("");SpherisKi.val("");UkuranSpherisKi1.val("");UkuranSpherisKi2.val("");CylindrisKa.val("");UkuranCylindrisKa1.val("");UkuranCylindrisKa2.val("");CylindrisKi.val("");UkuranCylindrisKi1.val("");UkuranCylindrisKi2.val("");ADDKa.val("");UkuranAddKa1.val("");UkuranAddKa2.val("");ADDKi.val("");UkuranAddKi1.val("");UkuranAddKi2.val("")}function t(){$("input:checkbox").prop("disabled",!0);$('input[name="rdpilihPelayanan"]').prop("disabled",!0);NoRefSEP.prop("disabled",!0);NoRefSEPAsal.prop("disabled",!0);NamaRefSEPAsal.prop("disabled",!0);txttanggalSEP.prop("disabled",!0);PelayananAlkesForm.prop("disabled",!0);JumlahLegalisasi.prop("disabled",!0);txtKeterangan.prop("disabled",!0);$('input[name="rdpilihPpkPenagih"]').prop("disabled",!0);NoPpkTujuan.prop("disabled",!0);NamaPpkTujuan.prop("disabled",!0);$('[name="KacamataForm"]').prop("disabled",!0);$('[name="LoadKacamataForm"]').prop("disabled",!0)}function u(){var n=txtnokartu.val();$(document).ajaxStart(function(){Pace.restart()});$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getRiwayatLegalisasi",data:"noka="+LZString.compressToEncodedURIComponent(JSON.stringify(n)),success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));n.pesan.kode=="1"?(TableRTRiwayatLegalisasi.clear().draw(),TableRTRiwayatLegalisasi.rows.add(n.TransAlkes).draw()):(TableRTRiwayatLegalisasi.clear().draw(),notif("Informasi..!!",n.pesan.pesan,"error"))}})}function r(){var r,e;let o=txttanggalTransaksi.val(),n=tarifUmum2.val()||0,t=biayaRealisasi_txt2.val()||0;r=parseInt(JumlahRealisasi.val());let u=TanggunganBPJS2.val(),s=txtKeterangan_realisasi.val(),h=PelayananRealisasi.val(),f=KdJenisAlkesLegalisasi=="032"?parseInt(u)<parseInt(n)?u:n:parseInt(t)*r<parseInt(n)?t*r:n;if(KdJenisAlkesLegalisasi=="036"&&(f=u),KdJenisAlkesLegalisasi=="")return notif("Informasi..!!","Data Tidak ditemukan, Mohon Refresh Kembali!","error"),!1;e={tglTrans:o,byTagihIns:f,tarifPpk:n,noRefLegalisasi:{NoReff:NoReffLegalisasi},jnsAlkes:{kdJenisAlkes:KdJenisAlkesLegalisasi},keterangan:s,tkp:{kdTkp:h},biaya:t};$.ajax({url:$("#txturl").val()+"/Lupis/realisasiInsert",data:JSON.stringify({mixed:LZString.compressToEncodedURIComponent(JSON.stringify(e))}),contentType:"application/json",type:"POST",success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.kode=="1")txtKosongFormRealisasi(),i(),loadDataRiwayatRealisasi(txtnokartu.val()),notif("Informasi","Data Berhasil di Simpan","info");else return notif(n.pesan,"error"),!1},error:function(n){ShareMethoerrorHandler(n.responseJSON)}})}function f(){txttanggalTransaksi.prop("disabled",!1);tarifUmum.prop("disabled",!1);txtKeterangan_realisasi.prop("disabled",!1);PelayananRealisasi.prop("disabled",!1);SimpanRealisasi.prop("disabled",!1);btnBatalSimpanRealisasi.prop("disabled",!1);TanggunganBPJS.prop("disabled",!1)}function i(){txttanggalTransaksi.prop("disabled",!0);tarifUmum.prop("disabled",!0);txtKeterangan_realisasi.prop("disabled",!0);PelayananRealisasi.prop("disabled",!0);SimpanRealisasi.prop("disabled",!0);btnBatalSimpanRealisasi.prop("disabled",!0);TanggunganBPJS.prop("disabled",!0);biayaRealisasi_txt.prop("disabled",!0)}noLegalisasiRealisasi=$("#noLegalisasiRealisasi");btnCariNoLegalisasiRealisasi=$("#btnCariNoLegalisasiRealisasi");btnQueryNoLegalisasiRealisasi=$("#btnQueryNoLegalisasiRealisasi");ModalRTRiwayatAlkesLegalisasi=$("#ModalRTRiwayatAlkesLegalisasi");lblJenisPelayanan=$("#lblJenisPelayanan");txttanggalTransaksi=$("#txttanggalTransaksi");tarifUmum=$("#tarifUmum");biayaRealisasi_txt=$("#biayaRealisasi_txt");TanggunganBPJS=$("#TanggunganBPJS");lblbiayaRealisasi=$("#lblbiayaRealisasi");tarifUmum2=$("#tarifUmum2");biayaRealisasi_txt2=$("#biayaRealisasi_txt2");TanggunganBPJS2=$("#TanggunganBPJS2");txtKeterangan_realisasi=$("#txtKeterangan_realisasi");PelayananRealisasi=$("#PelayananRealisasi");SimpanRealisasi=$("#SimpanRealisasi");btnBatalSimpanRealisasi=$("#btnBatalSimpanRealisasi");lblTanggalRealisasi=$("#lblTanggalRealisasi");lblTingkatPelayananRealisasi=$("#lblTingkatPelayananRealisasi");lblBiayaRealisasi=$("#lblBiayaRealisasi");divJumlahRealisasi=$("#divJumlahRealisasi");JumlahRealisasi=$("#JumlahRealisasi");divJumlahRealisasi.hide();i();ModalAlkesTitle=$("#ModalAlkesTitle");AlkesHeaderTitle=$("#AlkesHeaderTitle");divTanggalLegalisasi=$("#divTanggalLegalisasi");lblTanggalLegalisasi=$("#lblTanggalLegalisasi");txttanggalSEP=$("#txttanggalSEP");txtnokartu=$("#txtnokartu");NoRefSEP=$("#NoRefSEP");NoRefSEPAsal=$("#NoRefSEPAsal");NamaRefSEPAsal=$("#NamaRefSEPAsal");txtKeterangan=$("#txtKeterangan_legalisasi");NamaLegislator=$("#NamaLegislator");lblTanggalSEP=$("#lblTanggalSEP");lblNamaPPKAsal=$("#lblNamaPPKAsal");lblNoReferensi=$("#lblNoReferensi");CetakAlkesLegalisasi=$("#CetakAlkesLegalisasi");divRealisasi=$("#divRealisasi");lblAlertLegalisasi=$("#lblAlertLegalisasi");SimpanAlkes=$("#SimpanAlkes");divPelayananAlkesForm=$("#divPelayananAlkesForm");PelayananAlkesForm=$("#PelayananAlkesForm");divJumlahLegalisasi=$("#divJumlahLegalisasi");JumlahLegalisasi=$("#JumlahLegalisasi");protesaGigi_form=$("#protesaGigi_form");div_tingkatPelayanan=$("#div_tingkatPelayanan");divbiaya_txt=$("#divbiaya_txt");divPetScan=$("#divPetScan");checkPetScan=$("#checkPetScan");checkMRI=$("#checkMRI");div_PpkPenagih=$("#div_PpkPenagih");div_PpkTujuan=$("#div_PpkTujuan");NoPpkTujuan=$("#NoPpkTujuan");NamaPpkTujuan=$("#NamaPpkTujuan");cbPpkAsal=$("#cbPpkAsal");cbPpkTujuan=$("#cbPpkTujuan");cariPPKTujuan_modal=$("#cariPPKTujuan_modal");btnQueryCariPpkTujuan=$("#btnQueryCariPpkTujuan");txtCariPPKTujuan=$("#txtCariPPKTujuan");btnCariPPKTujuan=$("#btnCariPPKTujuan");KacamataForm=$("#Kacamata_Form");SpherisKa=$("#SpherisKa");UkuranSpherisKa1=$("#UkuranSpherisKa1");UkuranSpherisKa2=$("#UkuranSpherisKa2");SpherisKi=$("#SpherisKi");UkuranSpherisKi1=$("#UkuranSpherisKi1");UkuranSpherisKi2=$("#UkuranSpherisKi2");CylindrisKa=$("#CylindrisKa");UkuranCylindrisKa1=$("#UkuranCylindrisKa1");UkuranCylindrisKa2=$("#UkuranCylindrisKa2");CylindrisKi=$("#CylindrisKi");UkuranCylindrisKi1=$("#UkuranCylindrisKi1");UkuranCylindrisKi2=$("#UkuranCylindrisKi2");ADDKa=$("#ADDKa");UkuranAddKa1=$("#UkuranAddKa1");UkuranAddKa2=$("#UkuranAddKa2");ADDKi=$("#ADDKi");UkuranAddKi1=$("#UkuranAddKi1");UkuranAddKi2=$("#UkuranAddKi2");InputSpherisKa=$("#InputSpherisKa");InputSpherisKi=$("#InputSpherisKi");InputCylindrisKa=$("#InputCylindrisKa");InputCylindrisKi=$("#InputCylindrisKi");InputADDKa=$("#InputADDKa");InputADDKi=$("#InputADDKi");window.loadDataAlkesRealisasi=function(i){$(document).ajaxStart(function(){Pace.restart()});var r=i;n();$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getTransAlkesByNoReff",data:"noReff="+LZString.compressToEncodedURIComponent(JSON.stringify(r.NoReff)),success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.pesan.kode=="1"){$("#ModalAlkesLegalisasi").modal("show");let u;u=n.TransAlkes;ModalAlkesTitle.text("Pelayanan "+u.kdJenisAlkes.nmJenisAlkes);AlkesHeaderTitle.text("Pelayanan "+u.kdJenisAlkes.nmJenisAlkes);NoRefSEP.val(u.noRefAsalSJP);NoRefSEPAsal.val(u.ppkAsalPKS.kdPPK);NamaRefSEPAsal.val(u.ppkAsalPKS.nmPPK);NamaLegislator.text(u.legalisator.NmPeg);txttanggalSEP.val(u.tglResep);PelayananAlkesForm.val(u.kdJenisAlkesPenyakit.KdJnsAlkesPenyakit);JumlahLegalisasi.val(u.jumlah);txtKeterangan.val(u.keterangan);divTanggalLegalisasi.show();var i=new Date(u.TglLegalisasi),r=i.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});lblTanggalLegalisasi.text(r);t()}else notif("Informasi..!!",n.pesan.pesan,"error")},error:function(n){errorHandler(n.responseJSON)}})};window.loadDataPetScanRealisasi=function(i){$(document).ajaxStart(function(){Pace.restart()});var r=i;n();$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getTransPetScanByNoReff",data:"noReff="+LZString.compressToEncodedURIComponent(JSON.stringify(r.NoReff)),success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.pesan.kode=="1"){$("#ModalAlkesLegalisasi").modal("show");let f,u;f=n.TransPetScan;u=f.transAlkes;ModalAlkesTitle.text("Pelayanan "+u.kdJenisAlkes.nmJenisAlkes);AlkesHeaderTitle.text("Pelayanan "+u.kdJenisAlkes.nmJenisAlkes);f.petScan=="True"?checkPetScan.prop("checked",!0):checkPetScan.prop("checked",!1);f.MRI=="True"?checkMRI.prop("checked",!0):checkMRI.prop("checked",!1);NoRefSEP.val(u.noRefAsalSJP);NoRefSEPAsal.val(u.ppkAsalPKS.kdPPK);NamaRefSEPAsal.val(u.ppkAsalPKS.nmPPK);NamaLegislator.text(u.legalisator.NmPeg);txttanggalSEP.val(u.tglResep);txtKeterangan.val(u.keterangan);divTanggalLegalisasi.show();var i=new Date(u.TglLegalisasi),r=i.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});lblTanggalLegalisasi.text(r);t()}else notif("Informasi..!!",n.pesan.pesan,"error")},error:function(n){errorHandler(n.responseJSON)}})};window.loadDataAmbulansRealisasi=function(i){$(document).ajaxStart(function(){Pace.restart()});var r=i;n();$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getTransAmbulansByNoReff",data:"noReff="+LZString.compressToEncodedURIComponent(JSON.stringify(r.NoReff)),success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.pesan.kode=="1"){$("#ModalAlkesLegalisasi").modal("show");let f,u;f=n.TransAmbulans;u=f.transAlkes;ModalAlkesTitle.text("Pelayanan "+u.kdJenisAlkes.nmJenisAlkes);AlkesHeaderTitle.text("Pelayanan "+u.kdJenisAlkes.nmJenisAlkes);NoPpkTujuan.val(f.ppkTujuanPKS.kdPPK);NamaPpkTujuan.val(f.ppkTujuanPKS.nmPPK);f.ppkPenagihPKS.kdPPK==f.ppkTujuanPKS.kdPPK?cbPpkTujuan.prop("checked",!0):cbPpkAsal.prop("checked",!0);u.kdTKP==="10"?$("#cbPelayananFKTP").prop("checked",!0):$("#cbPelayananFKTL").prop("checked",!0);NoRefSEP.val(u.noRefAsalSJP);NoRefSEPAsal.val(u.ppkAsalPKS.kdPPK);NamaRefSEPAsal.val(u.ppkAsalPKS.nmPPK);NamaLegislator.text(u.legalisator.NmPeg);txttanggalSEP.val(u.tglResep);txtKeterangan.val(u.keterangan);divTanggalLegalisasi.show();var i=new Date(u.TglLegalisasi),r=i.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});lblTanggalLegalisasi.text(r);t()}else notif("Informasi..!!",n.pesan.pesan,"error")},error:function(n){errorHandler(n.responseJSON)}})};window.loadDataKacamataRealisasi=function(i){$(document).ajaxStart(function(){Pace.restart()});var r=i;n();$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getTransKacamataByNoReff",data:"noReff="+LZString.compressToEncodedURIComponent(JSON.stringify(r.NoReff)),success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.pesan.kode=="1"){$("#ModalAlkesLegalisasi").modal("show");let u,f;u=n.TransKacamata;f=u.transAlkes;ModalAlkesTitle.text("Pelayanan Kacamata");AlkesHeaderTitle.text("Pelayanan Kacamata");let e=u.spherisPlusMinKanan+u.spherisUkuranKanan,o=u.spherisPlusMinKiri+u.spherisUkuranKiri,s=u.cylindrisPlusMinKanan+u.cylindrisUkuranKanan,h=u.cylindrisPlusMinKiri+u.cylindrisUkuranKiri,c=u.addPlusMinKanan+u.addUkuranKanan,l=u.addPlusMinKiri+u.addUkuranKiri;InputSpherisKa.val(e);InputSpherisKi.val(o);InputCylindrisKa.val(s);InputCylindrisKi.val(h);InputADDKa.val(c);InputADDKi.val(l);NoRefSEP.val(f.noRefAsalSJP);NoRefSEPAsal.val(f.ppkAsalPKS.kdPPK);NamaRefSEPAsal.val(f.ppkAsalPKS.nmPPK);NamaLegislator.text(f.legalisator.NmPeg);txttanggalSEP.val(f.tglResep);txtKeterangan.val(f.keterangan);divTanggalLegalisasi.show();var i=new Date(f.TglLegalisasi),r=i.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});lblTanggalLegalisasi.text(r);t()}else notif("Informasi..!!",n.pesan.pesan,"error")},error:function(n){errorHandler(n.responseJSON)}})};window.loadJenisAlkesPenyakitRealisasi=function(n){var t=$("#PelayananAlkesForm");$(document).ajaxStart(function(){Pace.restart()});$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getJenisAlkesPenyakit",data:"kdJenisAlkes="+LZString.compressToEncodedURIComponent(JSON.stringify(n)),success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));n.pesan.kode=="1"?(t.html(""),t.append('<option selected="selected" value="">-- Pilih Pelayanan Alkes--<\/option>'),$.each(n.JenisAlkes,function(n,i){t.append('<option value="'+i.KdJnsAlkesPenyakit+'">'+i.NmJnsAlkesPenyakit+"<\/option>")})):(riwayatKegiatan.clear().draw(),notif("Informasi..!!",n.pesan.pesan,"error"))}})};window.setDefaultForm=function(){protesaGigi_form.hide();div_tingkatPelayanan.hide();divPelayananAlkesForm.hide();divJumlahLegalisasi.hide();divbiaya_txt.hide();lblAlertLegalisasi.hide();divPetScan.hide();div_PpkPenagih.hide();div_PpkTujuan.hide();$('[name="LabelKacamataForm"]').hide();$('[name="KacamataForm"]').hide();$('[name="LoadKacamataForm"]').hide()};$(".datepicker").val(formattgl(new Date));$(".datepicker").datepicker({language:"id",endDate:formattgl(new Date),todayHighlight:1,format:"yyyy-mm-dd",autoclose:!0,orientation:"left bottom"});$("#tarifUmum").on("input",function(){var t=$(this).val(),n=t.replace(/[^0-9]/g,"");$(this).val(convertToRupiah(n));tarifUmum2.val(parseInt(n));txtKeterangan_realisasi.val("")});$("#TanggunganBPJS").on("input",function(){var t=$(this).val(),n=t.replace(/[^0-9]/g,"");$(this).val(convertToRupiah(n));TanggunganBPJS2.val(n);txtKeterangan_realisasi.val("")});$("#biayaRealisasi_txt").on("input",function(){var t=$(this).val(),n=t.replace(/[^0-9]/g,"");$(this).val(convertToRupiah(n));biayaRealisasi_txt2.val(n);txtKeterangan_realisasi.val("")});$("#txtKeterangan_realisasi").on("input",function(){var n=parseInt(tarifUmum2.val()),i=parseInt(biayaRealisasi_txt2.val()),t=parseInt(JumlahRealisasi.val());KdJenisAlkesLegalisasi!="032"&&(KdJenisAlkesLegalisasi=="036"?n>=t*3e6&&n<=t*5e6&&n<i*t?(TanggunganBPJS.val(convertToRupiah(n)),TanggunganBPJS2.val(n)):(TanggunganBPJS.val(convertToRupiah(i*t)),TanggunganBPJS2.val(i*t)):n<i*t?(TanggunganBPJS.val(convertToRupiah(n)),TanggunganBPJS2.val(n)):(TanggunganBPJS.val(convertToRupiah(i*t)),TanggunganBPJS2.val(i*t)))});btnQueryPesertaLain.click(function(){$("#cariPesertaByJenis_modal").modal("show")});btnCariNoLegalisasiRealisasi.unbind("click").click(function(){if(noLegalisasiRealisasi.val()=="")return notif("Informasi..!!","Data legalisasi belum terisi!","error"),!1;if(noLegalisasiRealisasi.val().length!=11)return notif("Informasi..!!","No Legalisasi tidak sesuai!","error"),!1;var n={NoReff:noLegalisasiRealisasi.val(),noKaPst:{noKartu:txtnokartu.val()},kdJenisAlkes:{kdJenisAlkes:"0"}};loadDataTagihan(n)});btnQueryNoLegalisasiRealisasi.click(function(){TableRTRiwayatLegalisasi.clear().draw();u();ModalRTRiwayatAlkesLegalisasi.modal("show")});TableRTRiwayatLegalisasi=$("#TableRTRiwayatLegalisasi").DataTable({data:[],select:!0,columnDefs:[{targets:1,render:function(n){return"<div class='btn-group'><button type='button' style='width: 250px; height: 30px' class='btn btnRTView btn-default btn-xs' data-toggle='modal'>"+n+"<\/button><\/div>"}}],columns:[{data:"TglLegalisasi"},{data:"NoReff"},{data:"kdJenisAlkes.nmJenisAlkes",createdCell:function(n){$(n).css("text-align","center")}},{data:"kdPPK.nmPPK"},{data:"kdKC.nmKC"},],order:[[0,"asc"]],bAutoWidth:!0,rowCallback:function(){},initComplete:function(){var n=this.api();n.$("td").click(function(){n.search(this.innerHTML).draw()})},bFilter:!1,bInfo:!0,bLengthChange:!1,processing:!0,retrieve:!0,pageLength:50,scroll:200,searching:!0});$("#TableRTRiwayatLegalisasi tbody").unbind("click").on("click",".btnRTView",function(){var n=TableRTRiwayatLegalisasi.row($(this).parents("tr")).data();loadDataTagihan(n);ModalRTRiwayatAlkesLegalisasi.modal("hide")});window.loadDataTagihan=function(n){txtKosongFormRealisasi();$(document).ajaxStart(function(){Pace.restart()});var t=n;$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getTransForRealisasiByNoReff",data:"noReff="+LZString.compressToEncodedURIComponent(JSON.stringify(t.NoReff))+"&noka="+LZString.compressToEncodedURIComponent(JSON.stringify(t.noKaPst.noKartu))+"&kdJnsAlkes="+LZString.compressToEncodedURIComponent(JSON.stringify(t.kdJenisAlkes.kdJenisAlkes)),success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.pesan.kode=="1"){notif("Informasi","Data Berhasil Ditemukan","info");NoReffLegalisasi=t.NoReff;f();let i;i=n.TransAlkes;let r=new Date(i.TglLegalisasi);$(".datepicker").datepicker("setStartDate",r);KdJenisAlkesLegalisasi=i.kdJenisAlkes.kdJenisAlkes;noLegalisasiRealisasi.val(t.NoReff);lblJenisPelayanan.text(i.kdJenisAlkes.nmJenisAlkes);txttanggalTransaksi.val(i.TglLegalisasi);tglLegalisasiFlag=i.TglLegalisasi;biayaRealisasi_txt.val(convertToRupiah(i.kdJenisAlkes.tarif));biayaRealisasi_txt2.val(i.kdJenisAlkes.tarif);TanggunganBPJS.val(convertToRupiah(i.kdJenisAlkes.tarif));i.kdJenisAlkes.kdJenisAlkes=="036"||i.kdJenisAlkes.kdJenisAlkes=="039"?(TanggunganBPJS.prop("disabled",!0),divJumlahRealisasi.show(),JumlahRealisasi.val(i.jumlah),TanggunganBPJS.val(convertToRupiah(parseInt(i.kdJenisAlkes.tarif)*parseInt(i.jumlah))),i.kdJenisAlkes.kdJenisAlkes=="036"?biayaRealisasi_txt.prop("disabled",!1):biayaRealisasi_txt.prop("disabled",!0)):(divJumlahRealisasi.hide(),JumlahRealisasi.val("1"),TanggunganBPJS.prop("disabled",!1));i.kdJenisAlkes.isMax=="1"?lblbiayaRealisasi.text("Biaya Maksimal"):lblbiayaRealisasi.text("Biaya");PelayananRealisasi.prop("disabled",!0);PelayananRealisasi.html("");i.kdJenisAlkes.forRjtl=="True"?PelayananRealisasi.append('<option value="30" selected="selected">Rawat Jalan Tingkat Lanjut<\/option>'):i.kdJenisAlkes.forPromo=="True"&&i.kdJenisAlkes.kdJenisAlkes=="029"&&PelayananRealisasi.append('<option value="50" selected="selected">Pelayanan Promontif<\/option>')}else notif("Informasi..!!  "+n.pesan.pesan,"error"),i()},error:function(n){errorHandler(n.responseJSON)}})};SimpanRealisasi.unbind("click").on("click",function(){if(txttanggalTransaksi.val()==""){notif("Tanggal belum terisi","warning");return}if(txtKeterangan_realisasi.val()==""){notif("Mohon Lengkapi Inputan Keterangan","warning");return}if(txtKeterangan_realisasi.val().length>=100){notif("Keterangan melebihi 100 karakter","warning");return}if(PelayananRealisasi.val()==""){notif("Pelayanan tidak dikenal","warning");return}if(KdJenisAlkesLegalisasi!="039"&&KdJenisAlkesLegalisasi!="036"&&parseInt(biayaRealisasi_txt2.val())>0&&parseInt(TanggunganBPJS2.val())>parseInt(biayaRealisasi_txt2.val())){notif("Tarif tanggungan tidak boleh melebihi batas maksimal","warning");return}parseInt(tarifUmum2.val())<parseInt(biayaRealisasi_txt2.val())&&KdJenisAlkesLegalisasi!="036"&&biayaRealisasi_txt2.val(tarifUmum2.val());var n=new Date(txttanggalTransaksi.val()),t=new Date(tglLegalisasiFlag),i=Math.abs(n.getTime()-t.getTime()),u=Math.floor(i/864e5);u>30?Swal.fire({title:"Konfirmasi",text:"Tanggal Realisasi telah melebihi dari 30 hari (kalender) dari tanggal legalisasi Mohon segera merealisasikan Alat Kesehatan Peserta ",icon:"info",confirmButtonText:"Ok"}).then(function(n){n.value&&r();swal.closeModal()}):r()});btnBatalSimpanRealisasi.click(function(){txtKosongFormRealisasi();i()});window.txtKosongFormRealisasi=function(){noLegalisasiRealisasi.val("");lblJenisPelayanan.text("");txttanggalTransaksi.val("");tarifUmum.val("");biayaRealisasi_txt.val("");TanggunganBPJS.val("");txtKeterangan_realisasi.val("");PelayananRealisasi.val("");JumlahRealisasi.val("")}});$(document).ready(function(){function t(n){$("#divAsuransi").hide();switch(n){case"1":$("#lblJnsKartu").html("NIK");$("#txtnokartulain").attr("placeholder","ketik NIK");$("#txtnokartulain").attr("maxlength","16");break;case"2":$("#lblJnsKartu").html("NIP");$("#txtnokartulain").attr("placeholder","ketik NIP");$("#txtnokartulain").attr("maxlength","18");break;case"3":$("#lblJnsKartu").html("NRP");$("#txtnokartulain").attr("placeholder","ketik NRP");$("#txtnokartulain").attr("maxlength","18");break;case"4":$("#lblJnsKartu").html("No.Kartu");$("#divAsuransi").show();$("#txtnokartulain").attr("placeholder","ketik No.Kartu Asuransi");$("#txtnmasuransi").attr("placeholder","ketik Nama Asuransi")}}function i(){$(document).ajaxStart(function(){Pace.restart()});$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getListPesertaDetail",data:"noka="+LZString.compressToEncodedURIComponent(JSON.stringify($("#txtnokartulain").val()))+"&tglPel="+LZString.compressToEncodedURIComponent(JSON.stringify($("#txttanggal").val()))+"&kriteria="+LZString.compressToEncodedURIComponent(JSON.stringify($("#cbjnskartu").val()))+"&kode="+LZString.compressToEncodedURIComponent(JSON.stringify($("#txtkdasuransi").val())),success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));n.pesan.kode=="1"?(tbKartuLain.clear().draw(),tbKartuLain.rows.add(n.peserta).draw()):(tbKartuLain.clear().draw(),notif("Informasi..!!",n.pesan.pesan,"error"))},error:function(n){errorHandler(n.responseJSON)}})}function r(t){$(document).ajaxStart(function(){Pace.restart()});var i=t;$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/DeleteLegalisasi",data:"noReff="+LZString.compressToEncodedURIComponent(JSON.stringify(i.NoReff)),success:function(t){if(t=JSON.parse(LZString.decompressFromEncodedURIComponent(t)),t.kode=="1")n(),loadDataRiwayatLegalisasi(txtnokartu.val()),notif("Informasi","Data Berhasil Dihapus","info");else return notif(t.pesan,"error"),!1},error:function(n){ShareMethoerrorHandler(n.responseJSON)}})}function n(){$("#lblnokartu").html("");$("#lblnmpst").html("");$("#lblstatpst").html("");$("#lbljnspst").html("");$("#lblkelamin").html("");$("#lblppk").html("");$("#lbltgllahir").html("");$("#lblKelasRawat").html("");$("#prb_lbl").html("");$("#insertPelayananLegalisasi :input").prop("disabled",!0);$("input[name='rdpilihAlkesObat']").prop("disabled",!0);$("#PelayananAlkes").prop("disabled",!0);$("#btnSimpanPelayanan").prop("disabled",!0);$("#btnBatalPelayanan").prop("disabled",!0);$("#lbltgllahir2").hide();$("#divAsuransi").hide()}function u(){var n=$("#PelayananAlkes");$(document).ajaxStart(function(){Pace.restart()});$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getAllJenisAlkes",success:function(t){t=JSON.parse(LZString.decompressFromEncodedURIComponent(t));t.pesan.kode=="1"?(n.html(""),n.append('<option selected="selected" value="">-- Pilih Pelayanan Alkes--<\/option>'),$.each(t.JenisAlkes,function(t,i){i.kdJenisAlkes!=="010"&&i.kdJenisAlkes!=="011"&&n.append('<option value="'+i.kdJenisAlkes+'">'+i.nmJenisAlkes+"<\/option>")})):(riwayatKegiatan.clear().draw(),notif("Informasi..!!",t.pesan.pesan,"error"))}})}function f(){$(document).ajaxStart(function(){Pace.restart()});$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getPeserta",data:"noka="+LZString.compressToEncodedURIComponent(JSON.stringify($("#txtnokartu").val()))+"&tglPel="+LZString.compressToEncodedURIComponent(JSON.stringify($("#txttanggal").val())),success:function(t){if(t=JSON.parse(LZString.decompressFromEncodedURIComponent(t)),t.pesan.kode=="1"){if(checkLegalisasiRealisasi.val()==="Legalisasi"){if(t.peserta.infoTunggakan!=null)return parseInt(t.peserta.infoTunggakan.jmlBulanTelat)<6?(notif("Informasi..!!","Peserta Memiliki Tunggakan Premi \nPeringatan kepada peserta agar segera membayar tunggakan iuran!","error"),!1):(notif("Informasi..!!","Pelayanan tidak dapat dilanjutkan, karena peserta memiliki tunggakan premi yang belum dibayar 6 bulan setelah perpindahan Jenis Kepesertaan BPJS!","error"),!1);if(parseInt(t.peserta.statusAktif.kode)!="0")return notif("Informasi..!!","Peserta ini tidak aktif. \nKeterangan "+t.peserta.statusAktif.nama,"error"),!1}e(t.peserta.noKartu);checkLegalisasiRealisasi.val()==="Legalisasi"?(setDataPendaftaran(t),$("#lblnokartu").html(t.peserta.noKartu),$("#lblnmpst").html(t.peserta.nama),$("#lblstatpst").html(getPisa(t.peserta.pisa)),$("#lbljnspst").html(t.peserta.jnsPeserta.nama),$("#lblkelamin").html(getKelamin(t.peserta.sex)),$("#lblppk").html([t.peserta.kdPpkPst.kdPPK,t.peserta.kdPpkPst.nmPPK].join(" - ")),$("#lbltgllahir").html(t.peserta.tglLahir).trigger("labelchanged"),$("#lbltgllahir2").show(),$("#lblKelasRawat").html(t.peserta.jnsKelas.nama),$("#NoRefSEPAsal").val(t.userPPK),$("#NamaRefSEPAsal").val(t.nmprovider),$("#NamaLegislator").text(t.userNmPPK),$("#insertPelayananLegalisasi :input").prop("disabled",!1),$("input[name='rdpilihAlkesObat']").prop("disabled",!0),$("#PelayananAlkes").prop("disabled",!1),$("#btnSimpanPelayanan").prop("disabled",!1),$("#btnBatalPelayanan").prop("disabled",!1),loadDataRiwayatLegalisasi(t.peserta.noKartu),u()):checkLegalisasiRealisasi.val()==="Realisasi"&&($("#lblnokartu").html(t.peserta.noKartu),$("#lblnmpst").html(t.peserta.nama),$("#lblkelamin").html(getKelamin(t.peserta.sex)),$("#lbltgllahir").html(t.peserta.tglLahir).trigger("labelchanged"),$("#lbltgllahir2").show(),$("#lblKelasRawat").html(t.peserta.jnsKelas.nama),noLegalisasiRealisasi.prop("disabled",!1),btnCariNoLegalisasiRealisasi.prop("disabled",!1),btnQueryNoLegalisasiRealisasi.prop("disabled",!1),loadDataRiwayatRealisasi(t.peserta.noKartu))}else notif("Informasi..!!","Peserta Tidak Ditemukan!","error"),n(),checkLegalisasiRealisasi.val()==="Realisasi"&&txtKosongFormRealisasi(),riwayatKegiatan.clear().draw()},error:function(n){errorHandler(n.responseJSON)}})}function e(n){$(document).ajaxStart(function(){Pace.restart()});$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/checkPesertaProlanis",data:"noka="+LZString.compressToEncodedURIComponent(JSON.stringify(n)),success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.pesan.kode=="1"){let r="",t="",i="",u="";n.peserta.idPrbDM!="0"&&(t="DM");n.peserta.idPrbHT!="0"&&(t==""?t="HT":t+="+HT");t!==""&&(u="PRB ("+t+")",r="PRB ");n.peserta.idProlanisDM!="0"&&(i="DM");n.peserta.idProlanisHT!="0"&&(i==""?i="HT":i+="+HT");i!==""&&(u!==""?(u+=" & ",r+=" & Prolanis"):r="Prolanis ",u+="Prolanis ("+i+")");$("#prb_lbl").html("<strong>"+r+"<\/strong>")}else $("#prb_lbl").html("")},error:function(n){errorHandler(n.responseJSON)}})}checkLegalisasiRealisasi=$("#checkLegalisasiRealisasi");txtppkkd=$("#txtppkkd");divTanggalViewPeserta=$("#divTanggalViewPeserta");divStatusViewPeserta=$("#divStatusViewPeserta");divJenisViewPeserta=$("#divJenisViewPeserta");divPPKViewPeserta=$("#divPPKViewPeserta");txtnokartu=$("#txtnokartu");checkLegalisasiRealisasi.val()=="Realisasi"?(divTanggalViewPeserta.hide(),divStatusViewPeserta.hide(),divJenisViewPeserta.hide(),divPPKViewPeserta.hide()):(divTanggalViewPeserta.show(),divStatusViewPeserta.show(),divJenisViewPeserta.show(),divPPKViewPeserta.show());n();$("#txturl").val(base_url);cariPesertaByJenis_modal=$("#cariPesertaByJenis_modal");$("#cbjnskartu").change(function(){t(this.value);txtnokartulain.val("");tbKartuLain!=null&&tbKartuLain.clear().draw()});$("#btnCariKartuLain").unbind("click").click(function(){if($("#txtnokartulain").val().length==0)return notif("Informasi..!!","Nomor belum diisi!","error"),!1;i()});tbKartuLain=$("#tbKartuLain").DataTable({data:[],select:!0,columnDefs:[{targets:0,render:function(n){return"<div class='btn-group'><button type='button' class='btn btnNoKartuLain btn-default btn-xs' data-toggle='modal'>"+n+"<\/button><\/div>"}},],columns:[{data:"noKartu"},{data:"nama"},{data:"sex"},{data:"tglLahir"},],order:[[0,"asc"]],bAutoWidth:!0,rowCallback:function(){},initComplete:function(){var n=this.api();n.$("td").click(function(){n.search(this.innerHTML).draw()})},bFilter:!1,bInfo:!0,bLengthChange:!1,processing:!0,retrieve:!0,pageLength:50,scroll:200,searching:!0});$("#tbKartuLain tbody").unbind("click").on("click",".btnNoKartuLain",function(){var n=tbKartuLain.row($(this).parents("tr")).data();$("#txtnokartu").val(n.noKartu);$("#btnCariPeserta").click();cariPesertaByJenis_modal.modal("hide");tbKartuLain.clear().draw();$("#txtnokartulain").val("")});riwayatKegiatan=$("#riwayatLegalisasi").DataTable({data:[],select:!0,columnDefs:[{targets:1,render:function(n){return"<div class='btn-group'><button type='button' style='width: 250px; height: 30px' class='btn btnView btn-default btn-xs' data-toggle='modal'>"+n+"<\/button><\/div>"}},{targets:5,render:function(n,t,i){return i.Status=="0"&&i.kdPPK.kdPPK==txtppkkd.val()?"<div class='btn-group'> <button type='button' class='btn btnDelete btn btn-danger' ><i class='fa fa-trash'><\/i><\/button><\/div>":""}}],columns:[{data:"TglLegalisasi"},{data:"NoReff"},{data:"kdJenisAlkes.nmJenisAlkes",createdCell:function(n){$(n).css("text-align","center")}},{data:"kdPPK.nmPPK"},{data:"kdKC.nmKC"},],order:[[0,"asc"]],bAutoWidth:!0,rowCallback:function(){},initComplete:function(){var n=this.api();n.$("td").click(function(){n.search(this.innerHTML).draw()})},bFilter:!1,bInfo:!0,bLengthChange:!1,processing:!0,retrieve:!0,pageLength:10,scroll:200,searching:!0});$("#riwayatLegalisasi tbody").unbind("click").on("click",".btnView",function(){var n=riwayatKegiatan.row($(this).parents("tr")).data();setDefaultForm();SimpanAlkes.hide();CetakAlkesLegalisasi.show();setDataRiwayatLegalisasi(n);divRealisasi.hide();n.kdJenisAlkes.kdJenisAlkes==="005"?(protesaGigi_form.show(),div_tingkatPelayanan.show(),divbiaya_txt.show(),loadDataProtesagigi(n)):n.kdJenisAlkes.kdJenisAlkes==="034"?loadDataPetScan(n):n.kdJenisAlkes.kdJenisAlkes==="032"?(div_tingkatPelayanan.show(),div_PpkPenagih.show(),div_PpkTujuan.show(),loadDataAmbulans(n)):n.kdJenisAlkes.kdJenisAlkes==="002"?($('[name="LabelKacamataForm"]').show(),$('[name="LoadKacamataForm"]').show(),loadDataKacamata(n)):((n.kdJenisAlkes.kdJenisAlkes==="038"||n.kdJenisAlkes.kdJenisAlkes==="039")&&(loadJenisAlkesPenyakit(n.kdJenisAlkes.kdJenisAlkes),divPelayananAlkesForm.show()),(n.kdJenisAlkes.kdJenisAlkes==="036"||n.kdJenisAlkes.kdJenisAlkes==="039")&&divJumlahLegalisasi.show(),loadDataAlkes(n))});window.loadDataRiwayatLegalisasi=function(n){$(document).ajaxStart(function(){Pace.restart()});$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getRiwayatLegalisasi",data:"noka="+LZString.compressToEncodedURIComponent(JSON.stringify(n)),success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));n.pesan.kode=="1"?(riwayatKegiatan.clear().draw(),riwayatKegiatan.rows.add(n.TransAlkes).draw()):(riwayatKegiatan.clear().draw(),notif("Informasi..!!",n.pesan.pesan,"error"))}})};$("#riwayatLegalisasi tbody").on("click",".btnDelete",function(){var n=riwayatKegiatan.row($(this).parents("tr")).data();Swal.fire({title:"Konfirmasi",text:"Apakah Anda Yakin Akan Menghapus Legalisasi ini ",icon:"info",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak"}).then(function(t){t.value&&r(n);swal.closeModal()})});riwayatRealisasi=$("#riwayatRealisasi").DataTable({data:[],select:!0,columnDefs:[{targets:6,render:function(){return"<div class='btn-group'> <button type='button' class='btn btnView btn btn-info' ><i class='fa fa-eye'><\/i><\/button><\/div>"}}],columns:[{data:"TglLegalisasi"},{data:"NoReff"},{data:"kdJenisAlkes.nmJenisAlkes"},{data:"kdPPK.nmPPK"},{data:"kdKC.nmKC"},{data:"Status",render:function(n){return getStatusName(n)}},],order:[[0,"asc"]],bAutoWidth:!0,rowCallback:function(){},initComplete:function(){var n=this.api();n.$("td").click(function(){n.search(this.innerHTML).draw()})},bFilter:!1,bInfo:!0,bLengthChange:!1,processing:!0,retrieve:!0,pageLength:10,scroll:200,searching:!0});window.loadDataRiwayatRealisasi=function(n){$(document).ajaxStart(function(){Pace.restart()});$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getRiwayatRealisasi",data:"noka="+LZString.compressToEncodedURIComponent(JSON.stringify(n)),success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));n.pesan.kode=="1"?(riwayatRealisasi.clear().draw(),riwayatRealisasi.rows.add(n.TransAlkes).draw()):(riwayatRealisasi.clear().draw(),notif("Informasi..!!",n.pesan.pesan,"error"))}})};$("#riwayatRealisasi tbody").unbind("click").on("click",".btnView",function(){var n=riwayatRealisasi.row($(this).parents("tr")).data(),t,i;setDefaultForm();SimpanAlkes.hide();CetakAlkesLegalisasi.hide();divRealisasi.show();t=new Date(n.TglLegalisasi);i=t.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});lblTanggalRealisasi.text(i);lblTingkatPelayananRealisasi.text(getKdtkp(n.kdTKP));lblBiayaRealisasi.text(convertToRupiah(n.byTagih));n.kdJenisAlkes.kdJenisAlkes==="005"?(protesaGigi_form.show(),div_tingkatPelayanan.show(),divbiaya_txt.show(),loadDataProtesagigi(n)):n.kdJenisAlkes.kdJenisAlkes==="034"?loadDataPetScanRealisasi(n):n.kdJenisAlkes.kdJenisAlkes==="032"?(div_tingkatPelayanan.show(),div_PpkPenagih.show(),div_PpkTujuan.show(),loadDataAmbulansRealisasi(n)):n.kdJenisAlkes.kdJenisAlkes==="002"?($('[name="LabelKacamataForm"]').show(),$('[name="LoadKacamataForm"]').show(),loadDataKacamataRealisasi(n)):((n.kdJenisAlkes.kdJenisAlkes==="038"||n.kdJenisAlkes.kdJenisAlkes==="039")&&(loadJenisAlkesPenyakitRealisasi(n.kdJenisAlkes.kdJenisAlkes),divPelayananAlkesForm.show()),(n.kdJenisAlkes.kdJenisAlkes==="036"||n.kdJenisAlkes.kdJenisAlkes==="039")&&divJumlahLegalisasi.show(),loadDataAlkesRealisasi(n))});$("#btnCariPeserta").unbind("click").click(function(){if(n(),riwayatKegiatan.clear().draw(),$("#txtnokartu").val().length<13)return notif("Informasi..!!","Nomor Kartu Harus 13 Angka!","error"),!1;f()})});var peserta=null,userPPK=null,userNmPPK=null;$(document).ready(function(){checkLegalisasiRealisasi=$("#checkLegalisasiRealisasi");protesaGigi_form=$("#protesaGigi_form");panelRahangAtasKanan=$("#panelRahangAtasKanan");panelRahangAtasKiri=$("#panelRahangAtasKiri");panelRahangBawahKanan=$("#panelRahangBawahKanan");panelRahangBawahKiri=$("#panelRahangBawahKiri");panelPlafon=$(".panelPlafon");chk_full_denture=$("#chk_full_denture");chk_rahang_atas=$("#chk_rahang_atas");chk_rahang_bawah=$("#chk_rahang_bawah");cb_rahangatas_ka_8=$("#cb_rahangatas_ka_8");cb_rahangatas_ka_7=$("#cb_rahangatas_ka_7");cb_rahangatas_ka_6=$("#cb_rahangatas_ka_6");cb_rahangatas_ka_5=$("#cb_rahangatas_ka_5");cb_rahangatas_ka_4=$("#cb_rahangatas_ka_4");cb_rahangatas_ka_3=$("#cb_rahangatas_ka_3");cb_rahangatas_ka_2=$("#cb_rahangatas_ka_2");cb_rahangatas_ka_1=$("#cb_rahangatas_ka_1");cb_rahangatas_ki_8=$("#cb_rahangatas_ki_8");cb_rahangatas_ki_7=$("#cb_rahangatas_ki_7");cb_rahangatas_ki_6=$("#cb_rahangatas_ki_6");cb_rahangatas_ki_5=$("#cb_rahangatas_ki_5");cb_rahangatas_ki_4=$("#cb_rahangatas_ki_4");cb_rahangatas_ki_3=$("#cb_rahangatas_ki_3");cb_rahangatas_ki_2=$("#cb_rahangatas_ki_2");cb_rahangatas_ki_1=$("#cb_rahangatas_ki_1");cb_rahangbawah_ka_8=$("#cb_rahangbawah_ka_8");cb_rahangbawah_ka_7=$("#cb_rahangbawah_ka_7");cb_rahangbawah_ka_6=$("#cb_rahangbawah_ka_6");cb_rahangbawah_ka_5=$("#cb_rahangbawah_ka_5");cb_rahangbawah_ka_4=$("#cb_rahangbawah_ka_4");cb_rahangbawah_ka_3=$("#cb_rahangbawah_ka_3");cb_rahangbawah_ka_2=$("#cb_rahangbawah_ka_2");cb_rahangbawah_ka_1=$("#cb_rahangbawah_ka_1");cb_rahangbawah_ki_8=$("#cb_rahangbawah_ki_8");cb_rahangbawah_ki_7=$("#cb_rahangbawah_ki_7");cb_rahangbawah_ki_6=$("#cb_rahangbawah_ki_6");cb_rahangbawah_ki_5=$("#cb_rahangbawah_ki_5");cb_rahangbawah_ki_4=$("#cb_rahangbawah_ki_4");cb_rahangbawah_ki_3=$("#cb_rahangbawah_ki_3");cb_rahangbawah_ki_2=$("#cb_rahangbawah_ki_2");cb_rahangbawah_ki_1=$("#cb_rahangbawah_ki_1");txt_sisaplafon=$("#txt_sisaplafon");txt_tarif=$("#txt_tarif");txt_legalisasi_sebelumnya=$("#txt_legalisasi_sebelumnya");txtKeterangan=$("#txtKeterangan_legalisasi");biaya_txt2=$("#biaya_txt2");biaya_txt=$("#biaya_txt");statusRealisasi={plafon:0,realisasi:0,tarifpmk52:0};simpan_btn=$("#simpanPelayanananProtesaGigi_btn");hapus_btn=$("#hapus_btn");txttanggal=$("#txttanggal");txttanggalSEP=$("#txttanggalSEP");txtnokartu=$("#txtnokartu");NoKunjungan=$("#NoKunjungan");NoRefSEP=$("#NoRefSEP");NoRefSEPAsal=$("#NoRefSEPAsal");NamaRefSEPAsal=$("#NamaRefSEPAsal");divbiaya_txt=$("#divbiaya_txt");n:any=0;n:any=0;n:Date;n:Date;biaya_txt.hide();$("#txturl").val(base_url);txtKosong();var n=txttanggal.val(),t=new Date("2023-01-24");n<t?$(".panelPlafon").show():$(".panelPlafon").hide();chk_full_denture.change(function(){triggerCheckAll(99,this.checked)});chk_rahang_atas.change(function(){triggerCheckAll(1,this.checked)});chk_rahang_bawah.change(function(){triggerCheckAll(2,this.checked)});panelRahangAtasKanan.find("input:checkbox").change(function(){this.checked&&chk_rahang_atas.is(":checked")==!1&&chk_rahang_atas.prop("checked",!0);$("#panelRahangAtasKanan input:checkbox:checked").length==0&&$("#panelRahangAtasKiri input:checkbox:checked").length==0&&chk_rahang_atas.prop("checked",!1);isFullDenture()});panelRahangAtasKiri.find("input:checkbox").change(function(){this.checked&&chk_rahang_atas.is(":checked")==!1&&chk_rahang_atas.prop("checked",!0);$("#panelRahangAtasKanan input:checkbox:checked").length==0&&$("#panelRahangAtasKiri input:checkbox:checked").length==0&&chk_rahang_atas.prop("checked",!1);isFullDenture()});panelRahangBawahKanan.find("input:checkbox").change(function(){this.checked&&chk_rahang_bawah.is(":checked")==!1&&chk_rahang_bawah.prop("checked",!0);$("#panelRahangBawahKanan input:checkbox:checked").length==0&&$("#panelRahangBawahKiri input:checkbox:checked").length==0&&chk_rahang_bawah.prop("checked",!1);isFullDenture()});panelRahangBawahKiri.find("input:checkbox").change(function(){this.checked&&chk_rahang_bawah.is(":checked")==!1&&chk_rahang_bawah.prop("checked",!0);$("#panelRahangBawahKanan input:checkbox:checked").length==0&&$("#panelRahangBawahKiri input:checkbox:checked").length==0&&chk_rahang_bawah.prop("checked",!1);isFullDenture()})});$(document).ready(function(){function n(n){var i=new Date(n),r=i.getMonth()+1,u=i.getFullYear();$("#cbbulan").val(r);t("1",u)}function t(n,t){$.ajax({type:"GET",url:$("#txturl").val()+"/Setting/tahun",success:function(i){var u,r;if(i.pesan.kode=="1"){for(u="<option value=''>-- Pilih Tahun --<\/option>",r=0;r<i.tahun.length;r++)u+="<option value='"+i.tahun[r].tahun+"'>"+i.tahun[r].tahun+"<\/option>";$("#tahunRealisasiDaftar").html(u);n=="1"&&$("#tahunRealisasiDaftar").val(t)}else $("#tahunRealisasiDaftar").html("")}})}function i(n){$(document).ajaxStart(function(){Pace.restart()});$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/realisasiDelete",data:"noreff="+LZString.compressToEncodedURIComponent(JSON.stringify(n.noReff))+"&NoReffLegal="+LZString.compressToEncodedURIComponent(JSON.stringify(n.noRefLegalisasi.NoReff))+"&PPK_Kunjungan="+LZString.compressToEncodedURIComponent(JSON.stringify(n.ppkRealisasi.kdPPK)),success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.kode=="1")loadDataTagihanRealisasi(),notif("Informasi","Data Berhasil Dihapus","info");else return notif(n.pesan,"error"),!1},error:function(n){ShareMethoerrorHandler(n.responseJSON)}})}$("#txturl").val(base_url);PelayananRealisasiDaftar=$("#PelayananRealisasiDaftar");bulanRealisasiDaftar=$("#bulanRealisasiDaftar");tahunRealisasiDaftar=$("#tahunRealisasiDaftar");checkBaru=$("#checkBaru");checkDitagihkan=$("#checkDitagihkan");btnCariRealDaftarTagihan=$("#btnCariRealDaftarTagihan");n(new Date);btnCariRealDaftarTagihan.unbind("click").on("click",function(){if(PelayananRealisasiDaftar.val()==""){notif("Pelayanan Belum Di pilih","warning");return}loadDataTagihanRealisasi()});DaftarTagihanPesertaRealisasi=$("#DaftarTagihanPesertaRealisasi").DataTable({data:[],select:!0,columnDefs:[{targets:6,render:function(n,t,i){return i.Status=="0"?"<div class='btn-group'> <button type='button' class='btn btnDelete btn btn-danger'><i class='fa fa-trash'><\/i><\/button><\/div>":""}}],columns:[{data:"totalRows"},{data:"tglTrans"},{data:"noRefLegalisasi.noKaPst.nama"},{data:"jnsAlkes.nmJenisAlkes"},{data:"byTagih",render:function(n){return convertToRupiah(n)}},{data:"Status",render:function(n){return getStatusName(n)}},],order:[[0,"asc"]],bAutoWidth:!0,rowCallback:function(){},initComplete:function(){var n=this.api();n.$("td").click(function(){n.search(this.innerHTML).draw()})},bFilter:!1,bInfo:!0,bLengthChange:!1,processing:!0,retrieve:!0,pageLength:50,scroll:200,searching:!0});window.loadDataTagihanRealisasi=function(){$(document).ajaxStart(function(){Pace.restart()});let t=PelayananRealisasiDaftar.val(),i=bulanRealisasiDaftar.val(),r=tahunRealisasiDaftar.val(),n="";$('input[name="rdpilihRealisasiStatus"]:checked').val()==="10"?n="100":$('input[name="rdpilihRealisasiStatus"]:checked').val()==="01"?n="010":$('input[name="rdpilihRealisasiStatus"]:checked').val()==="11"?n="110":$('input[name="rdpilihRealisasiStatus"]:checked').val()==="12"&&(n="110");$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getTransRealisasiDetilPerBulan",data:"kdAlkes="+LZString.compressToEncodedURIComponent(JSON.stringify(""))+"&thn="+LZString.compressToEncodedURIComponent(JSON.stringify(r))+"&bln="+LZString.compressToEncodedURIComponent(JSON.stringify(i))+"&stat="+LZString.compressToEncodedURIComponent(JSON.stringify(n))+"&kdTkp="+LZString.compressToEncodedURIComponent(JSON.stringify(t)),success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));n.pesan.kode=="1"?(DaftarTagihanPesertaRealisasi.clear().draw(),DaftarTagihanPesertaRealisasi.rows.add(n.TransRealisasi).draw(),$('input[name="rdpilihRealisasiStatus"]:checked').val()==="11"?DaftarTagihanPesertaRealisasi.column(5).search("DiVerifikasi").draw():DaftarTagihanPesertaRealisasi.column(5).search("").draw()):(DaftarTagihanPesertaRealisasi.clear().draw(),notif("Informasi..!!",n.pesan.pesan,"error"))}})};$("#DaftarTagihanPesertaRealisasi tbody").on("click",".btnDelete",function(){var n=DaftarTagihanPesertaRealisasi.row($(this).parents("tr")).data();Swal.fire({title:"Konfirmasi",text:"Apakah Anda Yakin Akan Menghapus Realisasi ini ",icon:"info",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak"}).then(function(t){t.value&&i(n);swal.closeModal()})})});$(document).ready(function(){function r(n){var t=new Date(n),i=t.getMonth()+1,r=t.getFullYear();$("#cbbulan").val(i);u("1",r)}function u(n,t){$.ajax({type:"GET",url:$("#txturl").val()+"/Setting/tahun",success:function(i){var u,r;if(i.pesan.kode=="1"){for(u="<option value=''>-- Pilih Tahun --<\/option>",r=0;r<i.tahun.length;r++)u+="<option value='"+i.tahun[r].tahun+"'>"+i.tahun[r].tahun+"<\/option>";$("#tahunRealisasiFPK").html(u);n=="1"&&$("#tahunRealisasiFPK").val(t)}else $("#tahunRealisasiFPK").html("")}})}function f(){$(document).ajaxStart(function(){Pace.restart()});let r=PelayananRealisasiFPK.val(),u=bulanRealisasiFPK.val(),f=tahunRealisasiFPK.val();$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getTagForCreateFpk",data:"kdAlkes="+LZString.compressToEncodedURIComponent(JSON.stringify(""))+"&tahun="+LZString.compressToEncodedURIComponent(JSON.stringify(f))+"&bulan="+LZString.compressToEncodedURIComponent(JSON.stringify(u))+"&tkp="+LZString.compressToEncodedURIComponent(JSON.stringify(r)),success:function(r){if(r=JSON.parse(LZString.decompressFromEncodedURIComponent(r)),r.pesan.kode=="1"){let n;n=r.FpkReal;PelayananRealisasiFPK.val(n.tkp.kdTkp);lblNoFPK.text("Auto Generate");lblBulanTagihanFPK.text(t+" "+tahunRealisasiFPK.val());lblJumlahDataFKP.text(n.totDataStj);lblTotalTagihanFPK.text(convertToRupiah(n.totTag));o();btnSimpanGenerateFPK.prop("disabled",!1)}else notif("Informasi..!!","Data Tagihan Tidak Ditemukan!","error"),n(),i(),btnSimpanGenerateFPK.prop("disabled",!0),btnCetakGenerateFPK.prop("disabled",!0)}})}function e(){let n=PelayananRealisasiFPK.val(),t=bulanRealisasiFPK.val(),i=tahunRealisasiFPK.val();var r={tkp:{kdTkp:n},tahun:i,bulan:t};$.ajax({url:$("#txturl").val()+"/Lupis/fpkRealInsert",data:JSON.stringify({mixed:LZString.compressToEncodedURIComponent(JSON.stringify(r))}),contentType:"application/json",type:"POST",success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.kode=="1")lblNoFPK.text(n.id),btnSimpanGenerateFPK.prop("disabled",!0),btnCetakGenerateFPK.prop("disabled",!1),notif("Informasi","Data Berhasil di Simpan","info");else return notif(n.pesan,"error"),!1},error:function(n){ShareMethoerrorHandler(n.responseJSON)}})}function o(){PelayananRealisasiFPK.prop("disabled",!0)}function i(){PelayananRealisasiFPK.prop("disabled",!1);btnSimpanGenerateFPK.prop("disabled",!1);btnCetakGenerateFPK.prop("disabled",!1)}function n(){lblNoFPK.text("");lblBulanTagihanFPK.text("");lblJumlahDataFKP.text("");lblTotalTagihanFPK.text("");PelayananRealisasiFPK.val("");bulanRealisasiFPK.val("")}$("#txturl").val(base_url);PelayananRealisasiFPK=$("#PelayananRealisasiFPK");bulanRealisasiFPK=$("#bulanRealisasiFPK");tahunRealisasiFPK=$("#tahunRealisasiFPK");lblNoFPK=$("#lblNoFPK");lblBulanTagihanFPK=$("#lblBulanTagihanFPK");lblJumlahDataFKP=$("#lblJumlahDataFKP");lblTotalTagihanFPK=$("#lblTotalTagihanFPK");btnCariFPK=$("#btnCariFPK");btnSimpanGenerateFPK=$("#btnSimpanGenerateFPK");btnBatalGenerateFPK=$("#btnBatalGenerateFPK");btnCetakGenerateFPK=$("#btnCetakGenerateFPK");let t;r(new Date);btnSimpanGenerateFPK.prop("disabled",!0);btnCetakGenerateFPK.prop("disabled",!0);n();btnCariFPK.unbind("click").on("click",function(){if(PelayananRealisasiFPK.val()==""){notif("Pelayanan Belum Di pilih","warning");return}if(bulanRealisasiFPK.val()==""){notif("Bulan Belum Di pilih","warning");return}f()});$("#bulanRealisasiFPK").change(function(){var n=$(this).find("option:selected");t=n.text()});btnSimpanGenerateFPK.unbind("click").on("click",function(){e()});btnCetakGenerateFPK.unbind("click").click(function(){getDataFPKCetakHead(lblNoFPK.text());n();PelayananRealisasiFPK.prop("disabled",!1);btnSimpanGenerateFPK.prop("disabled",!0);btnCetakGenerateFPK.prop("disabled",!0)});btnBatalGenerateFPK.unbind("click").click(function(){n();i();btnSimpanGenerateFPK.prop("disabled",!0);btnCetakGenerateFPK.prop("disabled",!0)})});$(document).ready(function(){function e(n){var t=new Date(n),i=t.getMonth()+1,r=t.getFullYear();$("#cbbulan").val(i);o("1",r)}function o(n,t){$.ajax({type:"GET",url:$("#txturl").val()+"/Setting/tahun",success:function(i){var u,r;if(i.pesan.kode=="1"){for(u="<option value=''>-- Pilih Tahun --<\/option>",r=0;r<i.tahun.length;r++)u+="<option value='"+i.tahun[r].tahun+"'>"+i.tahun[r].tahun+"<\/option>";$("#tahunPencarianDataFPK").html(u);n=="1"&&$("#tahunPencarianDataFPK").val(t)}else $("#tahunPencarianDataFPK").html("")}})}function s(){var it,n,k,w,c,rt;dtDetailFPKHead=t;dtDetailFPKBody=i;it="data:image/png;base64,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";n=new jsPDF("p","mm",[210,297]);n.addImage(it,"PNG",10,6,50,9);n.setProperties({title:"Formulir Pengajuan Klaim ",subject:"Formulir Pengajuan Klaim "});k=n.internal.pageSize.getWidth();n.setFontSize(10);var y="BPJS Kesehatan Cabang "+dtDetailFPKHead.kdKC.nmKC,d=n.getTextWidth(y),g=k/2-d/2;n.text(g,10,y);n.setFontSize(13);n.setFont("helvetica","bold");y="FORMULIR PENGAJUAN KLAIM";d=n.getTextWidth(y);g=k/2-d/2;n.text(g,16,y);n.setLineWidth(.8);n.line(10,20,200,20);n.setLineWidth(.2);n.line(10,21,200,21);n.setFontSize(8);n.setFont("helvetica","normal");n.text(12,30,"Nomor FPK");n.text(12,35,"Provider");n.text(12,40,"Bulan Pelayanan");n.text(12,45,"Pelayanan");n.text(12,50,"Total Data");n.text(12,55,"Total Tagihan");n.text(42,30,": "+dtDetailFPKHead.noFpk);n.text(42,35,": "+dtDetailFPKHead.kdPPK.nmPPK);w=new Date(dtDetailFPKHead.tglFpk);c=w.toLocaleDateString("id-ID",{month:"long",year:"numeric"});n.text(42,40,": "+c);n.text(42,45,": "+dtDetailFPKHead.tkp.nmTkp);n.text(42,50,": "+dtDetailFPKHead.totDataStj);n.text(42,55,": "+convertToRupiah(dtDetailFPKHead.totTag));var e="NO TRANSAKSI",o="TANGGAL",s="NAMA PESERTA",h="JENIS KLAIM",p="BIAYA",nt=n.getTextWidth(e)+n.getTextWidth(o)+n.getTextWidth(s)+n.getTextWidth(h)+n.getTextWidth(p),u=(n.internal.pageSize.getWidth()-15-nt)/5,l=15,a=l+n.getTextWidth(e)+u-7,v=a+n.getTextWidth(o)+u-15,r=v+n.getTextWidth(s)+u+5,b=r+n.getTextWidth(h)+u+15;n.text(l,70,e);n.text(a,70,o);n.text(v,70,s);n.text(r,70,h);n.text(b,70,p);n.setLineWidth(.2);n.line(10,72,200,72);let f=77;$.each(dtDetailFPKBody,function(t,i){w=new Date(i.transReal.tglTrans);c=w.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});n.text(l,f,i.transReal.noReff);n.text(a,f,c);n.text(v,f,i.transReal.noRefLegalisasi.noKaPst.nama);n.text(r,f,i.transReal.noRefLegalisasi.kdJenisAlkes.nmJenisAlkes);n.text(b,f,convertToRupiah(i.transReal.byTagih));f>260&&(n.addPage(),f=20,e="NO TRANSAKSI",o="TANGGAL",s="NAMA PESERTA",h="JENIS KLAIM",p="BIAYA",nt=n.getTextWidth(e)+n.getTextWidth(o)+n.getTextWidth(s)+n.getTextWidth(h)+n.getTextWidth(p),u=(n.internal.pageSize.getWidth()-15-nt)/5,l=15,a=l+n.getTextWidth(e)+u-7,v=a+n.getTextWidth(o)+u-15,r=v+n.getTextWidth(s)+u+5,b=r+n.getTextWidth(h)+u+15,n.text(l,20,e),n.text(a,20,o),n.text(v,20,s),n.text(r,20,h),n.text(b,20,p),n.setLineWidth(.2),n.line(10,22,200,22));f+=5});rt=new Date;c=rt.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});let tt="Tanggal, "+c;n.text(r+20,240,tt);let ft=(n.getTextWidth(tt)-n.getTextWidth("Pengajuan Klaim"))/2;n.text(r+20+ft,245,"Pengajuan Klaim,");n.setLineWidth(.3);n.line(r+20-2.5,262,r+25+n.getTextWidth(tt),262);var et=n.output("datauristring"),ot="<iframe width='100%' height='100%' src='"+et+"'><\/iframe>",ut=window.open("","_blank","width=1024,height=600,directories=0,status=0,titlebar=0,scrollbars=0,menubar=0,toolbar=0,location=0,resizable=1");ut.document.write(ot);ut.document.close()}function h(n){$(document).ajaxStart(function(){Pace.restart()});let t=n;$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getDetailFpk",data:"noFPK="+LZString.compressToEncodedURIComponent(JSON.stringify(t)),success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));n.pesan.kode=="1"?(i=n.FpkReal,s()):notif("Informasi..!!",n.pesan.pesan,"error")}})}function c(){$(document).ajaxStart(function(){Pace.restart()});let n=bulanPencarianDataFPK.val(),t=tahunPencarianDataFPK.val();$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getLookupDataFpk",data:"tahun="+LZString.compressToEncodedURIComponent(JSON.stringify(t))+"&bulan="+LZString.compressToEncodedURIComponent(JSON.stringify(n)),success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));n.pesan.kode=="1"?(tablePencarianDataFPK.clear().draw(),tablePencarianDataFPK.rows.add(n.FpkReal).draw()):(tablePencarianDataFPK.clear().draw(),notif("Informasi..!!",n.pesan.pesan,"error"))}})}function l(){$(document).ajaxStart(function(){Pace.restart()});let n=lblNoFPKDetailFPK.text();totalRow.val(0);$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getDetailFpk",data:"noFPK="+LZString.compressToEncodedURIComponent(JSON.stringify(n)),success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));n.pesan.kode=="1"?(totalRow.val(n.totalRow),tableDaftarDetailFPK.clear().draw(),tableDaftarDetailFPK.rows.add(n.FpkReal).draw()):(tableDaftarDetailFPK.clear().draw(),notif("Informasi..!!",n.pesan.pesan,"error"))}})}function a(){$(document).ajaxStart(function(){Pace.restart()});let n=lblNoFPKDetailFPK.text();$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/fpkRealDelete",data:"noFpk="+LZString.compressToEncodedURIComponent(JSON.stringify(n)),success:function(n){if(n=JSON.parse(LZString.decompressFromEncodedURIComponent(n)),n.kode=="1")tableDaftarDetailFPK.clear().draw(),r(),notif("Informasi","Data Berhasil Dihapus","info");else return notif(n.pesan,"error"),!1},error:function(n){ShareMethoerrorHandler(n.responseJSON)}})}function r(){lblNoFPKDetailFPK.text("");lblBulanTagihanDetailFPK.text("");lblTingkatPelayananDetailFPK.text("");lblJumlahDataDetailFPK.text("");lblTotalTagihanDetailFPK.text("");lblStatusDataDetailFPK.text("");btnLihatDetailFPK.hide();btnHapusDetailFPK.hide();btnCetakDetailFPK.hide()}function u(){tablePencarianDataFPK.clear().draw()}function v(n){var t=null;return n=="30"?t="Rawat Jalan Tingkat Lanjut":n=="40"?t="Rawat Inap Tingkat Lanjut":n=="50"&&(t="Pelayanan Promotif"),t}function f(n){var t=null;return n=="0"?t="Baru":n=="1"?t="DiTagihkan":n=="2"&&(t="DiVerifikasi"),t}$("#txturl").val(base_url);let n,t,i;btnCariDetailFPK=$("#btnCariDetailFPK");lblNoFPKDetailFPK=$("#lblNoFPKDetailFPK");lblBulanTagihanDetailFPK=$("#lblBulanTagihanDetailFPK");lblTingkatPelayananDetailFPK=$("#lblTingkatPelayananDetailFPK");lblJumlahDataDetailFPK=$("#lblJumlahDataDetailFPK");lblTotalTagihanDetailFPK=$("#lblTotalTagihanDetailFPK");lblStatusDataDetailFPK=$("#lblStatusDataDetailFPK");btnLihatDetailFPK=$("#btnLihatDetailFPK");btnHapusDetailFPK=$("#btnHapusDetailFPK");btnCetakDetailFPK=$("#btnCetakDetailFPK");ModalPencarianDataFPK=$("#ModalPencarianDataFPK");bulanPencarianDataFPK=$("#bulanPencarianDataFPK");tahunPencarianDataFPK=$("#tahunPencarianDataFPK");btnCariPencarianDataFPK=$("#btnCariPencarianDataFPK");panelPencarianDataFPK=$("#panelPencarianDataFPK");StatusTingkatPelayananDetailFPK=$("#StatusTingkatPelayananDetailFPK");totalRow=$("#totalRow");r();e(new Date);btnCariDetailFPK.on("click",function(){tableDaftarDetailFPK.clear().draw();u();ModalPencarianDataFPK.modal("show")});btnCetakDetailFPK.unbind("click").click(function(){getDataFPKCetakHead(lblNoFPKDetailFPK.text())});window.getDataFPKCetakHead=function(n){$(document).ajaxStart(function(){Pace.restart()});let i=n;$.ajax({type:"GET",url:$("#txturl").val()+"/Lupis/getDataFPKCetakHead",data:"noFPK="+LZString.compressToEncodedURIComponent(JSON.stringify(i)),success:function(n){n=JSON.parse(LZString.decompressFromEncodedURIComponent(n));n.pesan.kode=="1"?(t=n.FpkReal,h(i)):notif("Informasi..!!",n.pesan.pesan,"error")}})};btnCariPencarianDataFPK.unbind("click").on("click",function(){c()});tablePencarianDataFPK=$("#tablePencarianDataFPK").DataTable({data:[],select:!0,columnDefs:[{targets:0,render:function(n){return"<div class='btn-group'><button type='button' class='btn btnNoFPK btn-default btn-xs' data-toggle='modal'>"+n+"<\/button><\/div>"}},],columns:[{data:"noFpk"},{data:"totDataStj"},{data:"totTag"},],order:[[0,"asc"]],bAutoWidth:!0,rowCallback:function(){},initComplete:function(){var n=this.api();n.$("td").click(function(){n.search(this.innerHTML).draw()})},bFilter:!1,bInfo:!0,bLengthChange:!1,processing:!0,retrieve:!0,pageLength:50,scroll:200,searching:!0});$("#bulanPencarianDataFPK").change(function(){var t=$(this).find("option:selected");n=t.text()});$("#tablePencarianDataFPK tbody").unbind("click").on("click",".btnNoFPK",function(){var t=tablePencarianDataFPK.row($(this).parents("tr")).data();lblNoFPKDetailFPK.text(t.noFpk);lblTingkatPelayananDetailFPK.text(v(t.tkp.kdTkp));StatusTingkatPelayananDetailFPK.val(t.tkp.kdTkp);lblBulanTagihanDetailFPK.text(n+" "+tahunPencarianDataFPK.val());lblJumlahDataDetailFPK.text(t.totDataStj);lblTotalTagihanDetailFPK.text(convertToRupiah(t.totTag));lblStatusDataDetailFPK.text(f(t.Status));btnLihatDetailFPK.show();t.Status==0?(btnHapusDetailFPK.show(),btnCetakDetailFPK.show()):(btnHapusDetailFPK.hide(),btnCetakDetailFPK.hide());u();ModalPencarianDataFPK.modal("hide")});btnLihatDetailFPK.unbind("click").on("click",function(){l()});tableDaftarDetailFPK=$("#tableDaftarDetailFPK").DataTable({data:[],select:!0,columnDefs:[],columns:[{data:"row"},{data:"transReal.tglTrans"},{data:"transReal.noRefLegalisasi.noKaPst.noKartu"},{data:"transReal.noRefLegalisasi.noKaPst.nama"},{data:"transReal.jnsAlkes.nmJenisAlkes"},{data:"transReal.byTagih",render:function(n){return convertToRupiah(n)}},{data:"transReal.Status",render:function(n){return f(n)}},],order:[[0,"asc"]],bAutoWidth:!0,rowCallback:function(){},initComplete:function(){var n=this.api();n.$("td").click(function(){n.search(this.innerHTML).draw()})},bFilter:!1,bInfo:!0,bLengthChange:!1,processing:!0,retrieve:!0,pageLength:50,scroll:200,searching:!0});btnHapusDetailFPK.click(function(){Swal.fire({title:"Konfirmasi",text:"Apakah anda yakin akan menghapus FPK dengan no: "+lblNoFPKDetailFPK.text()+"? \n(seluruh item akan dikeluarkan dari FPK ini (data tidak dihapus)",icon:"info",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak"}).then(function(n){n.value&&a();swal.closeModal()})})})